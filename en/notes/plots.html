<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.0">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="alternate" hreflang="zh-cn" href="https://huuhghhgyg.github.io/MicroCityNotes/notes/plots.html"><meta property="og:url" content="https://huuhghhgyg.github.io/MicroCityNotes/en/notes/plots.html"><meta property="og:site_name" content="MicroCity Notes"><meta property="og:title" content="Generic Drawing Code"><meta property="og:description" content="This section provides some pre-written drawing objects, which are convenient for direct use when visualizing data. All open source code on this page is licensed under the MIT li..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:locale:alternate" content="zh-CN"><meta property="og:updated_time" content="2023-11-27T04:37:02.000Z"><meta property="article:modified_time" content="2023-11-27T04:37:02.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Generic Drawing Code","image":[""],"dateModified":"2023-11-27T04:37:02.000Z","author":[]}</script><meta name="keywords" content="MicroCity,Notes,Docs"><link rel="manifest" href="../manifest.webmanifest"><link rel="icon" href="../images/icon_microcity.png"><title>Generic Drawing Code | MicroCity Notes</title><meta name="description" content="This section provides some pre-written drawing objects, which are convenient for direct use when visualizing data. All open source code on this page is licensed under the MIT li...">
    <link rel="preload" href="/MicroCityNotes/assets/style-gRAOaLx9.css" as="style"><link rel="stylesheet" href="/MicroCityNotes/assets/style-gRAOaLx9.css">
    <link rel="modulepreload" href="/MicroCityNotes/assets/app-L7G4vjgb.js"><link rel="modulepreload" href="/MicroCityNotes/assets/plots.html-5FE5NVUc.js"><link rel="modulepreload" href="/MicroCityNotes/assets/Subplot_Vertical-oXTmfxKU.js"><link rel="modulepreload" href="/MicroCityNotes/assets/plots.html-FPAlzRUf.js">
    
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/MicroCityNotes/en/" class=""><img class="logo" src="/MicroCityNotes/images/icon_microcitynotes.png" alt="MicroCity Notes"><span class="site-name can-hide">MicroCity Notes</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/MicroCityNotes/en/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/MicroCityNotes/en/notes/" class="router-link-active" aria-label="Notes"><!--[--><!--]--> Notes <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/MicroCityNotes/en/docs/" class="" aria-label="Desktop Documentation"><!--[--><!--]--> Desktop Documentation <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/MicroCityNotes/en/docs/1.1_what_microcity_can_do" class="" aria-label="1. MicroCity Introduction"><!--[--><!--]--> 1. MicroCity Introduction <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/MicroCityNotes/en/docs/2.1_showing_a_world_map" class="" aria-label="2. Getting Started with MicroCity"><!--[--><!--]--> 2. Getting Started with MicroCity <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/MicroCityNotes/en/docs/3.1_ui_overview" class="" aria-label="3. User Interface"><!--[--><!--]--> 3. User Interface <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/MicroCityNotes/en/docs/4.1_si_overview" class="" aria-label="4. Script Writing"><!--[--><!--]--> 4. Script Writing <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="MicroCity Repositories"><span class="title">MicroCity Repositories</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="MicroCity Repositories"><span class="title">MicroCity Repositories</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>GitHub</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/microcity/Desktop" rel="noopener noreferrer" target="_blank" aria-label="MicroCity Desktop"><!--[--><!--]--> MicroCity Desktop <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/microcity/microcity.github.io" rel="noopener noreferrer" target="_blank" aria-label="MicroCity Web"><!--[--><!--]--> MicroCity Web <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Gitee</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://gitee.com/microcity/microcity" rel="noopener noreferrer" target="_blank" aria-label="MicroCity Web"><!--[--><!--]--> MicroCity Web <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://gitee.com/microcity/desktop" rel="noopener noreferrer" target="_blank" aria-label="MicroCity Desktop"><!--[--><!--]--> MicroCity Desktop <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://microcity.gitee.io/" rel="noopener noreferrer" target="_blank" aria-label="MicroCity Web"><!--[--><!--]--> MicroCity Web <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MicroCityNotes/notes/plots.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div class="search-box" role="search" data-v-fd6cd4d5><input value="" aria-label="Search" class="" placeholder="Search" autocomplete="off" spellcheck="false" data-v-fd6cd4d5><!----></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/MicroCityNotes/en/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/MicroCityNotes/en/notes/" class="router-link-active" aria-label="Notes"><!--[--><!--]--> Notes <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/MicroCityNotes/en/docs/" class="" aria-label="Desktop Documentation"><!--[--><!--]--> Desktop Documentation <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/MicroCityNotes/en/docs/1.1_what_microcity_can_do" class="" aria-label="1. MicroCity Introduction"><!--[--><!--]--> 1. MicroCity Introduction <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/MicroCityNotes/en/docs/2.1_showing_a_world_map" class="" aria-label="2. Getting Started with MicroCity"><!--[--><!--]--> 2. Getting Started with MicroCity <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/MicroCityNotes/en/docs/3.1_ui_overview" class="" aria-label="3. User Interface"><!--[--><!--]--> 3. User Interface <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/MicroCityNotes/en/docs/4.1_si_overview" class="" aria-label="4. Script Writing"><!--[--><!--]--> 4. Script Writing <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="MicroCity Repositories"><span class="title">MicroCity Repositories</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="MicroCity Repositories"><span class="title">MicroCity Repositories</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>GitHub</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/microcity/Desktop" rel="noopener noreferrer" target="_blank" aria-label="MicroCity Desktop"><!--[--><!--]--> MicroCity Desktop <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/microcity/microcity.github.io" rel="noopener noreferrer" target="_blank" aria-label="MicroCity Web"><!--[--><!--]--> MicroCity Web <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Gitee</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://gitee.com/microcity/microcity" rel="noopener noreferrer" target="_blank" aria-label="MicroCity Web"><!--[--><!--]--> MicroCity Web <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://gitee.com/microcity/desktop" rel="noopener noreferrer" target="_blank" aria-label="MicroCity Desktop"><!--[--><!--]--> MicroCity Desktop <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://microcity.gitee.io/" rel="noopener noreferrer" target="_blank" aria-label="MicroCity Web"><!--[--><!--]--> MicroCity Web <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/MicroCityNotes/notes/plots.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/MicroCityNotes/en/notes/" class="router-link-active sidebar-item sidebar-heading" aria-label="Table of Contents"><!--[--><!--]--> Table of Contents <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">General Knowledge <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/MicroCityNotes/en/notes/lua.html" class="sidebar-item" aria-label="Quick Start with Lua Language"><!--[--><!--]--> Quick Start with Lua Language <!--[--><!--]--></a><!----></li><li><a href="/MicroCityNotes/en/notes/versions.html" class="sidebar-item" aria-label="Versions of MicroCity"><!--[--><!--]--> Versions of MicroCity <!--[--><!--]--></a><!----></li><li><a href="/MicroCityNotes/en/notes/timelapse.html" class="sidebar-item" aria-label="Time Advancement Methods"><!--[--><!--]--> Time Advancement Methods <!--[--><!--]--></a><!----></li><li><a href="/MicroCityNotes/en/notes/oop.html" class="sidebar-item" aria-label="Object-Oriented Programming"><!--[--><!--]--> Object-Oriented Programming <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">MicroCity <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/MicroCityNotes/en/notes/visualization.html" class="sidebar-item" aria-label="Visualization of Results"><!--[--><!--]--> Visualization of Results <!--[--><!--]--></a><!----></li><li><a href="/MicroCityNotes/en/notes/network.html" class="sidebar-item" aria-label="Operating Networks"><!--[--><!--]--> Operating Networks <!--[--><!--]--></a><!----></li><li><a href="/MicroCityNotes/en/notes/lp.html" class="sidebar-item" aria-label="Model Solving"><!--[--><!--]--> Model Solving <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">MicroCityWeb <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/MicroCityNotes/en/notes/web-ui.html" class="sidebar-item" aria-label="Introduction to the User Interface"><!--[--><!--]--> Introduction to the User Interface <!--[--><!--]--></a><!----></li><li><a href="/MicroCityNotes/en/notes/3d-scene.html" class="sidebar-item" aria-label="3D Scene"><!--[--><!--]--> 3D Scene <!--[--><!--]--></a><!----></li><li><a href="/MicroCityNotes/en/notes/3d-objects.html" class="sidebar-item" aria-label="3D Objects"><!--[--><!--]--> 3D Objects <!--[--><!--]--></a><!----></li><li><a href="/MicroCityNotes/en/notes/event-scheduling.html" class="sidebar-item" aria-label="Discrete Event Simulation and Program Control"><!--[--><!--]--> Discrete Event Simulation and Program Control <!--[--><!--]--></a><!----></li><li><a href="/MicroCityNotes/en/notes/mip.html" class="sidebar-item" aria-label="Mixed integer programming"><!--[--><!--]--> Mixed integer programming <!--[--><!--]--></a><!----></li><li><a href="/MicroCityNotes/en/notes/debug.html" class="sidebar-item" aria-label="Debugging"><!--[--><!--]--> Debugging <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Concepts <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/MicroCityNotes/en/notes/warehouse-simulation.html" class="sidebar-item" aria-label="Ideas for Warehouse Automation Simulation"><!--[--><!--]--> Ideas for Warehouse Automation Simulation <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Generic Drawing Code"><!--[--><!--]--> Generic Drawing Code <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#histogram" class="router-link-active router-link-exact-active sidebar-item" aria-label="Histogram"><!--[--><!--]--> Histogram <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#importing-the-histogram" class="router-link-active router-link-exact-active sidebar-item" aria-label="Importing the Histogram"><!--[--><!--]--> Importing the Histogram <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#creating-a-histogram-object" class="router-link-active router-link-exact-active sidebar-item" aria-label="Creating a Histogram Object"><!--[--><!--]--> Creating a Histogram Object <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#setting-histogram-properties" class="router-link-active router-link-exact-active sidebar-item" aria-label="Setting Histogram Properties"><!--[--><!--]--> Setting Histogram Properties <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#advanced-usage-of-histograms" class="router-link-active router-link-exact-active sidebar-item" aria-label="Advanced Usage of Histograms"><!--[--><!--]--> Advanced Usage of Histograms <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#example" class="router-link-active router-link-exact-active sidebar-item" aria-label="Example"><!--[--><!--]--> Example <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#subplots" class="router-link-active router-link-exact-active sidebar-item" aria-label="Subplots"><!--[--><!--]--> Subplots <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#importing-subplots" class="router-link-active router-link-exact-active sidebar-item" aria-label="Importing Subplots"><!--[--><!--]--> Importing Subplots <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#creating-subplot-objects" class="router-link-active router-link-exact-active sidebar-item" aria-label="Creating Subplot Objects"><!--[--><!--]--> Creating Subplot Objects <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#setting-subplot-properties" class="router-link-active router-link-exact-active sidebar-item" aria-label="Setting Subplot Properties"><!--[--><!--]--> Setting Subplot Properties <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#reading-subplot-values" class="router-link-active router-link-exact-active sidebar-item" aria-label="Reading Subplot Values"><!--[--><!--]--> Reading Subplot Values <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#example-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="Example"><!--[--><!--]--> Example <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#code" class="router-link-active router-link-exact-active sidebar-item" aria-label="Code"><!--[--><!--]--> Code <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#code-file-download" class="router-link-active router-link-exact-active sidebar-item" aria-label="Code File Download"><!--[--><!--]--> Code File Download <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#histogram-code" class="router-link-active router-link-exact-active sidebar-item" aria-label="Histogram Code"><!--[--><!--]--> Histogram Code <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/MicroCityNotes/en/notes/plots.html#subplot-code" class="router-link-active router-link-exact-active sidebar-item" aria-label="Subplot code"><!--[--><!--]--> Subplot code <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/MicroCityNotes/en/notes/cy-simulation.html" class="sidebar-item" aria-label="Port AGV Service Process 3D Simulation Approach"><!--[--><!--]--> Port AGV Service Process 3D Simulation Approach <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="generic-drawing-code" tabindex="-1"><a class="header-anchor" href="#generic-drawing-code" aria-hidden="true">#</a> Generic Drawing Code</h1><p>This section provides some pre-written drawing objects, which are convenient for direct use when visualizing data.</p><div class="hint-container info"><p class="hint-container-title">Info</p><p>All open source code on this page is licensed under the MIT license and can be used freely. However, please retain the copyright information when publicly distributing.</p></div><h2 id="histogram" tabindex="-1"><a class="header-anchor" href="#histogram" aria-hidden="true">#</a> Histogram</h2><p>A histogram is generally used to display the frequency or frequency distribution of various data values in a data set. It divides the data into several intervals (or &quot;bins&quot;) according to a certain interval and then plots the frequency (or frequency) of each interval as a bar chart on the y-axis to reflect the distribution of the data.</p><p>Here is an example of a histogram drawn using the histogram object I wrapped.</p><div style="text-align:center;"><p><img src="/MicroCityNotes/assets/Histogram-hCqM-8K4.png" alt="Histogram Example" width="500"></p></div><h3 id="importing-the-histogram" tabindex="-1"><a class="header-anchor" href="#importing-the-histogram" aria-hidden="true">#</a> Importing the Histogram</h3><p>First, import the histogram code. There are currently two options:</p><ol><li><strong>Download the code file and import it (recommended)</strong>: [Download the histogram code file](#Code file download) <code>Histogram.lua</code> and import it into MicroCityWeb. Then, reference the file to use it. The code reference is as follows:</li></ol><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;Histogram&quot;</span><span class="token punctuation">)</span> <span class="token comment">--Reference the histogram</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li><strong>Copy the code</strong>: Copy the code from the <code>Histogram.lua</code> file directly into your code. The code is shown [<strong>below</strong>](#Histogram Code).</li></ol><h3 id="creating-a-histogram-object" tabindex="-1"><a class="header-anchor" href="#creating-a-histogram-object" aria-hidden="true">#</a> Creating a Histogram Object</h3><p>Create a histogram object.</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">local</span> plot <span class="token operator">=</span> <span class="token function">Histogram</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token comment">-- list is the data set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>You can also set the properties of the graph when creating the object.</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">local</span> plot <span class="token operator">=</span> <span class="token function">Histogram</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token punctuation">{</span>range<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span> scale<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span> fdisp<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token operator">/</span>n<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">..</span><span class="token string">&quot;%&quot;</span> <span class="token keyword">end</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Setting the properties is not necessary and can be done as needed. In this case, only the <code>range</code>, <code>scale</code>, and <code>fdisp</code> properties are set.</p><h3 id="setting-histogram-properties" tabindex="-1"><a class="header-anchor" href="#setting-histogram-properties" aria-hidden="true">#</a> Setting Histogram Properties</h3><p>The above example provides a simple demonstration of setting histogram properties. According to the code, more properties can be set. See the table below for details:</p><table><thead><tr><th>Property</th><th>Function</th><th>Example</th></tr></thead><tbody><tr><td><code>origin</code></td><td>Set the origin of the graph (bottom-left point)</td><td><code>origin = {-50, -50}</code>, set the origin of the graph at position (-50,-50)</td></tr><tr><td><code>size</code></td><td>Set the length of the x and y axes of the graph</td><td><code>size = {100, 100}</code>, set the length of the x and y axes of the graph to 100 each</td></tr><tr><td><code>scale</code></td><td>Set the graduations of the x and y axes</td><td><code>scale = {3, 2}</code>, set the graduations of the x and y axes of the graph to 3 and 2 respectively</td></tr><tr><td><code>axislabel</code></td><td>Set the titles of the x and y axes</td><td><code>axislabel = {&quot;x&quot;, &quot;y&quot;}</code>, set the titles of the x and y axes of the graph to &quot;x&quot; and &quot;y&quot; respectively</td></tr><tr><td><code>range</code></td><td>Set the display range of the x and y axes</td><td><code>range = {0, 10, 0, 20}</code>, set the x-axis range of the graph to [0,10] and the y-axis range to [0,20]</td></tr><tr><td><code>filled</code></td><td>Set whether to fill the bar chart</td><td><code>filled = false</code>, set the bar chart to unfilled. The default style is filled</td></tr><tr><td><code>fdisp</code></td><td>The display function for data labels, which defaults to the quantity. When setting the display function for data labels, it will also affect the display of y-axis tick marks.</td><td><code>fdisp = function(v) return (v/n*100)..&quot;%&quot; end</code>, change the data labels to display in proportion (assuming n is the sample size)</td></tr></tbody></table><h3 id="advanced-usage-of-histograms" tabindex="-1"><a class="header-anchor" href="#advanced-usage-of-histograms" aria-hidden="true">#</a> Advanced Usage of Histograms</h3><p>Dynamically refresh the data plot.</p><ol><li>Modify the data in the graph. Here, we use adding data to the graph as an example. Let&#39;s assume <code>rnd</code> is the data to be added. You can also directly modify the value of <code>plot.data</code>.</li></ol><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code>table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>plot<span class="token punctuation">.</span>data<span class="token punctuation">,</span> rnd<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>Refresh the graph.</li></ol><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code>plot<span class="token punctuation">:</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example</h3><h4 id="basic-usage-example-drawing-a-poisson-distribution" tabindex="-1"><a class="header-anchor" href="#basic-usage-example-drawing-a-poisson-distribution" aria-hidden="true">#</a> Basic Usage Example: Drawing a Poisson Distribution</h4><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;Histogram&quot;</span><span class="token punctuation">)</span> <span class="token comment">--Reference the histogram</span>

<span class="token keyword">local</span> seed <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">randomseed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    distribution <span class="token operator">=</span> <span class="token string">&quot;poisson&quot;</span><span class="token punctuation">,</span>
    mu <span class="token operator">=</span> <span class="token string">&quot;3&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> list <span class="token operator">=</span> <span class="token punctuation">{</span>seed<span class="token punctuation">:</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>


<span class="token comment">--Static drawing</span>
<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token operator">#</span>list<span class="token punctuation">,</span> <span class="token number">400</span> <span class="token keyword">do</span>
    table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> seed<span class="token punctuation">:</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token keyword">local</span> histplot <span class="token operator">=</span> <span class="token function">Histogram</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    range <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    scale <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="advanced-usage-example-dynamically-refreshing-plot-of-the-poisson-distribution" tabindex="-1"><a class="header-anchor" href="#advanced-usage-example-dynamically-refreshing-plot-of-the-poisson-distribution" aria-hidden="true">#</a> Advanced Usage Example: Dynamically Refreshing Plot of the Poisson Distribution</h4><p>This is an example of plotting the Poisson distribution and dynamically refreshing the data plot. It is assumed that the <code>Histogram</code> object has been imported and the scene is set for 2D display.</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;Histogram&quot;</span><span class="token punctuation">)</span> <span class="token comment">-- Import the histogram</span>

<span class="token keyword">local</span> seed <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">randomseed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    distribution <span class="token operator">=</span> <span class="token string">&quot;poisson&quot;</span><span class="token punctuation">,</span>
    mu <span class="token operator">=</span> <span class="token string">&quot;3&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> list <span class="token operator">=</span> <span class="token punctuation">{</span>seed<span class="token punctuation">:</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token keyword">local</span> histplot <span class="token operator">=</span> <span class="token function">Histogram</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    range <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    scale <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">-- Dynamic drawing</span>
<span class="token keyword">local</span> count <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">while</span> count <span class="token operator">&lt;</span> <span class="token number">1000</span> <span class="token keyword">do</span>
    <span class="token keyword">local</span> rnd <span class="token operator">=</span> seed<span class="token punctuation">:</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>histplot<span class="token punctuation">.</span>data<span class="token punctuation">,</span> rnd<span class="token punctuation">)</span>

    histplot<span class="token punctuation">:</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    count <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token number">1</span>
    scene<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="subplots" tabindex="-1"><a class="header-anchor" href="#subplots" aria-hidden="true">#</a> Subplots</h2><p>Subplots are a way to position and size multiple plots within a single interface. The name is borrowed from MATLAB.</p><div style="text-align:center;"><p><img src="/MicroCityNotes/assets/Subplot_Vertical-X1t_RUlM.png" alt="Subplots" width="500"></p></div><h3 id="importing-subplots" tabindex="-1"><a class="header-anchor" href="#importing-subplots" aria-hidden="true">#</a> Importing Subplots</h3><p>First, import the code for subplots. Like histograms, there are two options for importing:</p><ol><li><strong>Download the code file and import (recommended)</strong>: <a href="#code-file-download">Download the subplot code file</a>, import the <code>Subplot.lua</code> file in MicroCityWeb, and then use the code. Use the following code to import:<div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;Subplot&quot;</span><span class="token punctuation">)</span> <span class="token comment">-- Import the subplot code</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><strong>Copy the code</strong>: Copy the code from the <code>Subplot.lua</code> file directly into your code. In this case, there is no need to import the code. See the code <a href="#subplot-code"><strong>below</strong></a>.</li></ol><h3 id="creating-subplot-objects" tabindex="-1"><a class="header-anchor" href="#creating-subplot-objects" aria-hidden="true">#</a> Creating Subplot Objects</h3><p>When creating a subplot, you must specify the number of rows and columns. The number of rows and columns determines the number of subplots.</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">local</span> subplot <span class="token operator">=</span> <span class="token function">Subplot</span><span class="token punctuation">(</span>rows<span class="token punctuation">,</span> cols<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>You can also set additional properties to define the position and size of the subplots. Here is an example of setting the position and size of the subplots when creating them:</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">local</span> subplot <span class="token operator">=</span> <span class="token function">Subplot</span><span class="token punctuation">(</span>rows<span class="token punctuation">,</span> cols<span class="token punctuation">,</span> <span class="token punctuation">{</span>span<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> diag<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="setting-subplot-properties" tabindex="-1"><a class="header-anchor" href="#setting-subplot-properties" aria-hidden="true">#</a> Setting Subplot Properties</h3><p>Here, we will provide a detailed description of the properties of subplots. Setting these properties is optional and can be done as needed.</p><table><thead><tr><th style="text-align:center;">Property</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td style="text-align:center;"><code>span</code></td><td>Sets the spacing between subplots</td><td><code>span=10</code>, sets the spacing between subplots to 10 in all directions</td></tr><tr><td style="text-align:center;"><code>diag</code></td><td>Sets the position and size of a subplot by specifying the coordinates of the two diagonal points</td><td><code>diag = {-80, -70, 80, 70}</code>, sets the diagonal range of the subplot from coordinates <code>(-80,-70)</code> to <code>(80,70)</code></td></tr></tbody></table><h3 id="reading-subplot-values" tabindex="-1"><a class="header-anchor" href="#reading-subplot-values" aria-hidden="true">#</a> Reading Subplot Values</h3><p>After creating a subplot with properties, or modifying the properties and refreshing, you can read the values of the subplots, including the origin position and size of each subplot, using the following attributes.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>Here, it is assumed that the subplot object is stored in the <code>subplot</code> variable after creation.</p></div><table><thead><tr><th style="text-align:center;">Attribute</th><th>Meaning</th><th>Example</th></tr></thead><tbody><tr><td style="text-align:center;"><code>originpt</code></td><td>The origin position of each subplot in the Subplot object</td><td>The origin position of the subplot in the <code>i</code>-th row and <code>j</code>-th column can be obtained by <code>subplot.originpt[i][j][1]</code> and <code>subplot.originpt[i][j][2]</code></td></tr><tr><td style="text-align:center;"><code>psize</code></td><td>The size of each subplot in the Subplot object</td><td>The width and height of the subplot in the <code>subplot</code> can be obtained by <code>subplot.psize[1]</code> and <code>subplot.psize[2]</code>.(assuming all subplots have the same size)</td></tr></tbody></table><h3 id="example-1" tabindex="-1"><a class="header-anchor" href="#example-1" aria-hidden="true">#</a> Example</h3><p>This is an example of drawing the range of subplots. Assume that the <code>Subplot</code> object has been imported and the scene has been set to 2D display.</p><p>Here, the display range of each subplot in a 2x3 subplot is drawn as a rectangle. The range of each subplot is represented by four gray points, and the position of each subplot is represented by a blue rectangle.</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;Subplot&quot;</span><span class="token punctuation">)</span> <span class="token comment">-- import the Subplot library</span>

<span class="token keyword">local</span> subplot <span class="token operator">=</span> <span class="token function">Subplot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>span <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">-- Draw the boundary points of the Subplot object</span>
<span class="token keyword">local</span> lb <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;points&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>size <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> vertices<span class="token operator">=</span><span class="token punctuation">{</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> lt <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;points&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>size <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> vertices<span class="token operator">=</span><span class="token punctuation">{</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> rb <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;points&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>size <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> vertices<span class="token operator">=</span><span class="token punctuation">{</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> rt <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;points&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>size <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> vertices<span class="token operator">=</span><span class="token punctuation">{</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">-- Draw the range of each subplot</span>
<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>row <span class="token keyword">do</span>
    <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>col <span class="token keyword">do</span>
        scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;polyline&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>size <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span>
            vertices<span class="token operator">=</span><span class="token punctuation">{</span>
                subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>subplot<span class="token punctuation">.</span>psize<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
                subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
                subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>subplot<span class="token punctuation">.</span>psize<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
                subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>subplot<span class="token punctuation">.</span>psize<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>subplot<span class="token punctuation">.</span>psize<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
                subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>subplot<span class="token punctuation">.</span>psize<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
scene<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="code" tabindex="-1"><a class="header-anchor" href="#code" aria-hidden="true">#</a> Code</h2><p>You can remove the <code>scene.setenv</code> code at the beginning depending on the combination of your code. The <code>scene.render()</code> in the code is used to refresh the image during dynamic drawing.</p><h3 id="code-file-download" tabindex="-1"><a class="header-anchor" href="#code-file-download" aria-hidden="true">#</a> Code File Download</h3><p>A list of code files can be found in <a href="https://github.com/huuhghhgyg/ModelResource/tree/main/libs" target="_blank" rel="noopener noreferrer">ModelResource/libs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><table><thead><tr><th>Name</th><th>Link</th></tr></thead><tbody><tr><td>Histogram</td><td><a href="https://github.com/huuhghhgyg/ModelResource/blob/main/libs/Histogram.lua" target="_blank" rel="noopener noreferrer">ModelResource/libs/Histogram.lua<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr><tr><td>Subplot</td><td><a href="https://github.com/huuhghhgyg/ModelResource/blob/main/libs/Subplot.lua" target="_blank" rel="noopener noreferrer">ModelResource/libs/Subplot.lua<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr></tbody></table><h3 id="histogram-code" tabindex="-1"><a class="header-anchor" href="#histogram-code" aria-hidden="true">#</a> Histogram Code</h3><p><code>Histogram</code></p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token comment">-- Initial scene settings</span>
<span class="token keyword">local</span> s <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">setenv</span><span class="token punctuation">(</span><span class="token punctuation">{</span>camtype <span class="token operator">=</span> <span class="token string">&quot;ortho&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">-- Returns a histogram object</span>
<span class="token keyword">function</span> <span class="token function">Histogram</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">...</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> plot <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token comment">-- Default value settings</span>
        origin <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">-- Coordinate origin coordinates</span>
        size <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">-- Coordinate axis length</span>
        scale <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">-- Coordinate axis scale values</span>
        range <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">-- xy-axis range</span>
        axislabel <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        filled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">,</span> <span class="token comment">-- Whether to fill</span>
        fdisp <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token comment">-- Data label display</span>
            <span class="token keyword">return</span> v
        <span class="token keyword">end</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">-- Import parameters and fallback</span>
    <span class="token keyword">if</span> <span class="token punctuation">...</span> <span class="token operator">~=</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
        <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
            plot<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    
    <span class="token keyword">local</span> barShape <span class="token operator">=</span> <span class="token string">&quot;polygon&quot;</span>
    <span class="token keyword">if</span> plot<span class="token punctuation">.</span>filled <span class="token operator">==</span> <span class="token keyword">false</span> <span class="token keyword">then</span> barShape <span class="token operator">=</span> <span class="token string">&quot;polyline&quot;</span> <span class="token keyword">end</span>

    <span class="token comment">-- Initialization</span>
    plot<span class="token punctuation">.</span>axes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">-- Coordinate axes</span>
    plot<span class="token punctuation">.</span>originlabel <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">-- The zero point may have dual coordinates</span>
    plot<span class="token punctuation">.</span>bars <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">-- Data bars</span>
    plot<span class="token punctuation">.</span>xvalue <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">-- x-axis tick values (excluding the minimum value)</span>
    plot<span class="token punctuation">.</span>data <span class="token operator">=</span> data

    <span class="token keyword">function</span> plot<span class="token punctuation">:</span><span class="token function">deldata</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- Delete data (private)</span>
        <span class="token keyword">if</span> <span class="token operator">#</span>plot<span class="token punctuation">.</span>bars <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">then</span>
            <span class="token keyword">return</span>
        <span class="token keyword">end</span>

        <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token operator">#</span>plot<span class="token punctuation">.</span>bars<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">do</span>
            <span class="token comment">-- print(&quot;plot.bar:&quot;,i)</span>
            plot<span class="token punctuation">.</span>bars<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            plot<span class="token punctuation">.</span>bars<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">end</span>

        plot<span class="token punctuation">.</span>zero<span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token operator">#</span>plot<span class="token punctuation">.</span>originlabel<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">do</span>
            plot<span class="token punctuation">.</span>originlabel<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">end</span>

        <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token operator">#</span>plot<span class="token punctuation">.</span>axes<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">do</span>
            <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token operator">#</span>plot<span class="token punctuation">.</span>axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">do</span>
                plot<span class="token punctuation">.</span>axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                plot<span class="token punctuation">.</span>axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">end</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>

    <span class="token keyword">function</span> plot<span class="token punctuation">:</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- Called when drawing repeatedly (public)</span>
        plot<span class="token punctuation">:</span><span class="token function">deldata</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-- Calculate coordinate scale parameters local xmax = math.max(math.max(table.unpack(plot.data)), plot.range[2]) local xmin = math.min(math.min(table.unpack(plot.data)), plot.range[1]) local valueRange = xmax - xmin plot.range[1], plot.range[2] = xmin, xmax</p><p>-- Statistical drawing values local barData = {} for i = 1, #data do -- Deep copy table.insert(barData, data[i]) end plot.barValue = {}</p><p>-- Draw zero point plot.zero = scene.addobj(&quot;points&quot;, { vertices = {plot.origin[1], plot.origin[2], 0}, size = 10 }) if plot.range[1] == plot.range[3] then -- Both are 0 plot.originlabel[1] = scene.addobj(&quot;label&quot;, { text = plot.range[1], size = 4 }) plot.originlabel[1]:setpos(plot.origin[1] - 4, plot.origin[2] - 4, 0) else plot.originlabel[1] = scene.addobj(&quot;label&quot;, { text = plot.range[1], size = 4 }) plot.originlabel[1]:setpos(plot.origin[1], plot.origin[2] - 4, 0) plot.originlabel[2] = scene.addobj(&quot;label&quot;, { text = plot.range[3], size = 4 }) plot.originlabel[2]:setpos(plot.origin[1] - 4, plot.origin[2], 0) end</p><p>-- X-axis Scale local xaxis = {} -- x-axis object, with elements as {point, label} for j = 1, (plot.range[2] - plot.range[1]) / plot.scale[1] do -- index of the scale local xpt = plot.origin[1] + j * plot.size[1] / (plot.range[2] - plot.range[1]) * plot.scale[1] -- X-axis scale position local pt = scene.addobj(&quot;points&quot;, { vertices = {xpt, plot.origin[2], 0}, size = 5 }) -- scale point local label = scene.addobj(&quot;label&quot;, { text = string.format(&quot;%.1f&quot;, plot.range[1] + j * plot.scale[1]), size = 4 }) -- scale label table.insert(plot.xvalue, plot.range[1] + j * plot.scale[1]) -- current x-axis value label:setpos(xpt, plot.origin[2] - 4, 0) xaxis[j] = {pt, label} -- add object to x-axis collection end plot.axes[1] = xaxis</p><pre><code>    for i = 1, #plot.axes[1] do -- based on x-axis score
        local ub = plot.xvalue[i] -- current loop maximum value
        -- print(&quot;Loop&quot;, i, &quot;ub=&quot;, ub) -- for debugging

        local value = 0
        for j = #barData, 1, -1 do
            if barData[j] &lt;= ub then
                value = value + 1
                table.remove(barData, j)
            end
        end
        plot.barValue[i] = value -- record value
    end
    local ymax = math.max(table.unpack(plot.barValue))
    plot.range[4] = math.max(ymax, plot.range[4])
</code></pre><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token comment">-- Y-axis scale</span>
<span class="token keyword">local</span> yaxis <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">-- y-axis objects, each element is {point, label}</span>
<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">-</span> plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> plot<span class="token punctuation">.</span>scale<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token keyword">do</span> <span class="token comment">-- index of each scale</span>
    <span class="token keyword">local</span> ypt <span class="token operator">=</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> i <span class="token operator">*</span> plot<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token punctuation">(</span>plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">-</span> plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> plot<span class="token punctuation">.</span>scale<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">-- Y-scale position</span>
    <span class="token keyword">local</span> pt <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;points&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        vertices <span class="token operator">=</span> <span class="token punctuation">{</span>plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ypt<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        size <span class="token operator">=</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">-- scale point</span>
    <span class="token keyword">local</span> label <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;label&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        text <span class="token operator">=</span> plot<span class="token punctuation">.</span><span class="token function">fdisp</span><span class="token punctuation">(</span>plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> i <span class="token operator">*</span> plot<span class="token punctuation">.</span>scale<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        size <span class="token operator">=</span> <span class="token number">4</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">-- scale label</span>
    label<span class="token punctuation">:</span><span class="token function">setpos</span><span class="token punctuation">(</span>plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">,</span> ypt<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    yaxis<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>pt<span class="token punctuation">,</span> label<span class="token punctuation">}</span>
<span class="token keyword">end</span>
plot<span class="token punctuation">.</span>axes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> yaxis

<span class="token comment">-- Draw data</span>
<span class="token keyword">local</span> xunit <span class="token operator">=</span> plot<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token punctuation">(</span>plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token operator">#</span>plot<span class="token punctuation">.</span>axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">-- x-axis division value</span>
<span class="token keyword">local</span> yunit <span class="token operator">=</span> plot<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token punctuation">(</span>plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">-</span> plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">-- y-axis division value</span>

<span class="token comment">-- Draw histogram based on the values</span>
<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">#</span>plot<span class="token punctuation">.</span>axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">do</span>
    <span class="token comment">-- Drawing</span>
    <span class="token keyword">local</span> xl <span class="token operator">=</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> plot<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token punctuation">(</span>plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> plot<span class="token punctuation">.</span>scale<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">local</span> xr <span class="token operator">=</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> i <span class="token operator">*</span> plot<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token punctuation">(</span>plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> plot<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> plot<span class="token punctuation">.</span>scale<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">local</span> yb<span class="token punctuation">,</span> yt <span class="token operator">=</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> plot<span class="token punctuation">.</span>barValue<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> yunit
    <span class="token keyword">local</span> bar <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span>barShape<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        vertices <span class="token operator">=</span> <span class="token punctuation">{</span>xl<span class="token punctuation">,</span> yb<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> xr<span class="token punctuation">,</span> yb<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> xr<span class="token punctuation">,</span> yt<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> xl<span class="token punctuation">,</span> yt<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> xl<span class="token punctuation">,</span> yb<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> label <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;label&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        text <span class="token operator">=</span> plot<span class="token punctuation">.</span><span class="token function">fdisp</span><span class="token punctuation">(</span>plot<span class="token punctuation">.</span>barValue<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        size <span class="token operator">=</span> <span class="token number">4</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    label<span class="token punctuation">:</span><span class="token function">setpos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>xl <span class="token operator">+</span> xr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> yt <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    plot<span class="token punctuation">.</span>bars<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>bar<span class="token punctuation">,</span> label<span class="token punctuation">}</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">function</span> plot<span class="token punctuation">:</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- Draw initialization</span>
    <span class="token comment">-- Coordinate axis object</span>
    plot<span class="token punctuation">.</span>coord <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;polyline&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        vertices <span class="token operator">=</span> <span class="token punctuation">{</span>plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> plot<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> plot<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">-- Coordinate axis title</span>
    <span class="token keyword">if</span> plot<span class="token punctuation">.</span>axislabel<span class="token operator">~=</span><span class="token keyword">nil</span> <span class="token keyword">then</span>
        plot<span class="token punctuation">.</span>axislabel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;label&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            text <span class="token operator">=</span> plot<span class="token punctuation">.</span>axislabel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            size <span class="token operator">=</span> <span class="token number">4</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        plot<span class="token punctuation">.</span>axislabel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token function">setpos</span><span class="token punctuation">(</span>plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> plot<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        plot<span class="token punctuation">.</span>axislabel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&quot;label&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            text <span class="token operator">=</span> plot<span class="token punctuation">.</span>axislabel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            size <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        plot<span class="token punctuation">.</span>axislabel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token function">setpos</span><span class="token punctuation">(</span>plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> plot<span class="token punctuation">.</span>origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> plot<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        plot<span class="token punctuation">.</span>axislabel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token function">setrot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

plot<span class="token punctuation">:</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
plot<span class="token punctuation">:</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> plot
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="subplot-code" tabindex="-1"><a class="header-anchor" href="#subplot-code" aria-hidden="true">#</a> Subplot code</h3><p><code>Subplot</code></p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token comment">-- Attribute parameters</span>
<span class="token comment">-- local diag = {-80, -70, 80, 70} -- lbx,lby,rtx,rty</span>
<span class="token comment">-- local span = 10</span>
<span class="token comment">-- local row, col = 2, 2</span>
<span class="token keyword">function</span> <span class="token function">Subplot</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">...</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> subplot <span class="token operator">=</span> <span class="token punctuation">{</span>
        span <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
        diag <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        originpt <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">-- Store coordinates of each row and column</span>
        psize <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">-- Subplot size</span>
    <span class="token punctuation">}</span>
    subplot<span class="token punctuation">.</span>row<span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>col <span class="token operator">=</span> row<span class="token punctuation">,</span> col

```lua
<span class="token comment">-- Import parameters and fallback</span>
<span class="token keyword">if</span> <span class="token punctuation">...</span> <span class="token operator">~=</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
        subplot<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> subplot<span class="token punctuation">:</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">-- Calculate parameters</span>
    subplot<span class="token punctuation">.</span>psize <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">-</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token punctuation">(</span>subplot<span class="token punctuation">.</span>col<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>subplot<span class="token punctuation">.</span>span<span class="token punctuation">)</span><span class="token operator">/</span>subplot<span class="token punctuation">.</span>col<span class="token punctuation">,</span>
        <span class="token punctuation">(</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">-</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token punctuation">(</span>subplot<span class="token punctuation">.</span>row<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>subplot<span class="token punctuation">.</span>span<span class="token punctuation">)</span><span class="token operator">/</span>subplot<span class="token punctuation">.</span>row
    <span class="token punctuation">}</span>
    <span class="token keyword">local</span> gwidth<span class="token punctuation">,</span> gheight <span class="token operator">=</span> subplot<span class="token punctuation">.</span>psize<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>subplot<span class="token punctuation">.</span>span<span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>psize<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>subplot<span class="token punctuation">.</span>span

    <span class="token comment">-- Recalculate originpt</span>
    subplot<span class="token punctuation">.</span>originpt <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>row <span class="token keyword">do</span>
        subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>col <span class="token keyword">do</span>
            subplot<span class="token punctuation">.</span>originpt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>gwidth<span class="token punctuation">,</span> subplot<span class="token punctuation">.</span>diag<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>gheight<span class="token punctuation">}</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

subplot<span class="token punctuation">:</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> subplot
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>This post is translated using ChatGPT, please <a href="https://github.com/huuhghhgyg/MicroCityNotes/issues/new" target="_blank" rel="noopener noreferrer"><strong>feedback</strong><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> if any omissions.</p></blockquote></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: huuhghhgyg@outlook.com">huuhghhgyg</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/MicroCityNotes/en/notes/warehouse-simulation.html" class="" aria-label="Ideas for Warehouse Automation Simulation"><!--[--><!--]--> Ideas for Warehouse Automation Simulation <!--[--><!--]--></a></span><span class="next"><a href="/MicroCityNotes/en/notes/cy-simulation.html" class="" aria-label="Port AGV Service Process 3D Simulation Approach"><!--[--><!--]--> Port AGV Service Process 3D Simulation Approach <!--[--><!--]--></a></span></p></nav><!--[--><!--[--><!-- 评论 --><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/MicroCityNotes/assets/app-L7G4vjgb.js" defer></script>
  </body>
</html>

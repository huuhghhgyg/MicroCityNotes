<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="alternate" hreflang="zh-cn" href="https://huuhghhgyg.github.io/MicroCityNotes/notes/mip.html"><meta property="og:url" content="https://huuhghhgyg.github.io/MicroCityNotes/en/notes/mip.html"><meta property="og:site_name" content="MicroCity Notes"><meta property="og:title" content="Mixed integer programming"><meta property="og:description" content="Mixed integer programming Mixed-Integer Programming (MIP) is a powerful mathematical optimization technique used to solve problems where some of the decision variables are requi..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:locale:alternate" content="zh-CN"><meta property="og:updated_time" content="2024-06-09T09:39:41.000Z"><meta property="article:modified_time" content="2024-06-09T09:39:41.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Mixed integer programming","image":[""],"dateModified":"2024-06-09T09:39:41.000Z","author":[]}</script><meta name="keywords" content="MicroCity,Notes,Docs"><link rel="manifest" href="/MicroCityNotes/manifest.webmanifest"><link rel="manifest" href="/MicroCityNotes/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#25a5f9"><title>Mixed integer programming | MicroCity Notes</title><meta name="description" content="Mixed integer programming Mixed-Integer Programming (MIP) is a powerful mathematical optimization technique used to solve problems where some of the decision variables are requi...">
    <link rel="preload" href="/MicroCityNotes/assets/style-CAoSAIai.css" as="style"><link rel="stylesheet" href="/MicroCityNotes/assets/style-CAoSAIai.css">
    <link rel="modulepreload" href="/MicroCityNotes/assets/app-IsHl6ERv.js"><link rel="modulepreload" href="/MicroCityNotes/assets/mip.html-WJLynccT.js">
    
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/MicroCityNotes/en/"><img class="vp-site-logo" src="/MicroCityNotes/images/icon_microcitynotes.png" alt="MicroCity Notes"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">MicroCity Notes</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/MicroCityNotes/en/notes/" aria-label="Notes"><!---->Notes<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/microcity/microcity.github.io/tree/master/doc" aria-label="MicroCity Web" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><a class="route-link auto-link" href="/MicroCityNotes/en/docs/" aria-label="MicroCity Desktop"><!---->MicroCity Desktop<!----></a></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/MicroCityNotes/en/docs/1.1_what_microcity_can_do.html" aria-label="1. MicroCity Introduction"><!---->1. MicroCity Introduction<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/MicroCityNotes/en/docs/2.1_showing_a_world_map.html" aria-label="2. Getting Started with MicroCity"><!---->2. Getting Started with MicroCity<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/MicroCityNotes/en/docs/3.1_ui_overview.html" aria-label="3. User Interface"><!---->3. User Interface<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/MicroCityNotes/en/docs/4.1_si_overview.html" aria-label="4. Script Writing"><!---->4. Script Writing<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="MicroCity Links"><span class="title">MicroCity Links</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="MicroCity Links"><span class="title">MicroCity Links</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>GitHub</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/microcity/Desktop" aria-label="MicroCity Desktop Repository" rel="noopener noreferrer" target="_blank"><!---->MicroCity Desktop Repository<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/microcity/microcity.github.io" aria-label="MicroCity Web Repository" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web Repository<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://microcity.github.io/" aria-label="MicroCity Web Online Environment" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web Online Environment<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/MicroCityNotes/notes/mip.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/MicroCityNotes/en/notes/mip.html" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="search-pro-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Search</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/MicroCityNotes/en/notes/" aria-label="Notes"><!---->Notes<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/microcity/microcity.github.io/tree/master/doc" aria-label="MicroCity Web" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><a class="route-link auto-link" href="/MicroCityNotes/en/docs/" aria-label="MicroCity Desktop"><!---->MicroCity Desktop<!----></a></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/MicroCityNotes/en/docs/1.1_what_microcity_can_do.html" aria-label="1. MicroCity Introduction"><!---->1. MicroCity Introduction<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/MicroCityNotes/en/docs/2.1_showing_a_world_map.html" aria-label="2. Getting Started with MicroCity"><!---->2. Getting Started with MicroCity<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/MicroCityNotes/en/docs/3.1_ui_overview.html" aria-label="3. User Interface"><!---->3. User Interface<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/MicroCityNotes/en/docs/4.1_si_overview.html" aria-label="4. Script Writing"><!---->4. Script Writing<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="MicroCity Links"><span class="title">MicroCity Links</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="MicroCity Links"><span class="title">MicroCity Links</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>GitHub</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/microcity/Desktop" aria-label="MicroCity Desktop Repository" rel="noopener noreferrer" target="_blank"><!---->MicroCity Desktop Repository<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/microcity/microcity.github.io" aria-label="MicroCity Web Repository" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web Repository<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://microcity.github.io/" aria-label="MicroCity Web Online Environment" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web Online Environment<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/MicroCityNotes/notes/mip.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/MicroCityNotes/en/notes/mip.html" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading" href="/MicroCityNotes/en/notes/" aria-label="Table of Contents"><!---->Table of Contents<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">General Knowledge <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/lua.html" aria-label="Quick Start with Lua Language"><!---->Quick Start with Lua Language<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/versions.html" aria-label="Version Information of MicroCity"><!---->Version Information of MicroCity<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/timelapse.html" aria-label="Advancement of Simulation Time"><!---->Advancement of Simulation Time<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/oop.html" aria-label="Object-Oriented Programming"><!---->Object-Oriented Programming<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/tools.html" aria-label="Tools"><!---->Tools<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">MicroCity <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/visualization.html" aria-label="Visualization of Results"><!---->Visualization of Results<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/network.html" aria-label="Operating Networks"><!---->Operating Networks<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/lp.html" aria-label="Model Solving"><!---->Model Solving<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">MicroCityWeb <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/web-ui.html" aria-label="User Interface Overview"><!---->User Interface Overview<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/3d-scene.html" aria-label="3D Scene"><!---->3D Scene<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/3d-objects.html" aria-label="3D Objects"><!---->3D Objects<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/event-scheduling.html" aria-label="Discrete Event Simulation and Program Control"><!---->Discrete Event Simulation and Program Control<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/MicroCityNotes/en/notes/mip.html" aria-label="Mixed integer programming"><!---->Mixed integer programming<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/debug.html" aria-label="Debugging"><!---->Debugging<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Concepts <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/warehouse-simulation.html" aria-label="Ideas for Warehouse Automation Simulation"><!---->Ideas for Warehouse Automation Simulation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/plots.html" aria-label="General Drawing Code"><!---->General Drawing Code<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/en/notes/cy-simulation.html" aria-label="Port AGV Service Process 3D Simulation Approach"><!---->Port AGV Service Process 3D Simulation Approach<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="mixed-integer-programming" tabindex="-1"><a class="header-anchor" href="#mixed-integer-programming"><span>Mixed integer programming</span></a></h1><p>Mixed-Integer Programming (MIP) is a powerful mathematical optimization technique used to solve problems where some of the decision variables are required to be integers. This article provides a step-by-step guide on creating and solving MIP models using Lua programming language in the context of MicroCity Web.</p><div class="hint-container info"><p class="hint-container-title">Translate info</p><p>This section is translated with assistance from ChatGPT, and the translation may not be accurate. If you have any questions, please leave remark below.</p></div><h2 id="creating-a-mixed-integer-programming-model" tabindex="-1"><a class="header-anchor" href="#creating-a-mixed-integer-programming-model"><span>Creating a Mixed-Integer Programming Model</span></a></h2><p>Creating an integer programming model object.</p><div class="language-lua" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token keyword">local</span> mip <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">newmip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- Assign the created model object to mip</span></span>
<span class="line"></span></code></pre></div><h2 id="setting-the-objective-function" tabindex="-1"><a class="header-anchor" href="#setting-the-objective-function"><span>Setting the Objective Function</span></a></h2><p>In MicroCity Web, the first line of the model is the objective function, added using the <code>mip:addrow()</code> function.</p><p>You can choose to maximize or minimize the objective function. The usage is as follows:</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-27-0" aria-selected="true">Maximize</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-27-1" aria-selected="false">Minimize</button></div><!--[--><div class="vp-code-tab active" id="codetab-27-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">Maximize</div><!--[--><div class="language-lua" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span>coeff<span class="token punctuation">,</span> <span class="token string">&#39;max&#39;</span><span class="token punctuation">)</span> <span class="token comment">-- Maximize the objective function</span></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-code-tab" id="codetab-27-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">Minimize</div><!--[--><div class="language-lua" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span>coeff<span class="token punctuation">,</span> <span class="token string">&#39;min&#39;</span><span class="token punctuation">)</span> <span class="token comment">-- Minimize the objective function</span></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><h4 id="parameter-description-and-examples" tabindex="-1"><a class="header-anchor" href="#parameter-description-and-examples"><span>Parameter Description and Examples</span></a></h4><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td><code>mip</code></td><td>Mathematical model object. Sets the objective function for the model</td></tr><tr><td><code>coeff</code></td><td>Coefficients of the objective function, a <code>table</code> variable. Determines the coefficients of the objective function in the model.</td></tr><tr><td><code>&quot;min&quot;</code> or <code>&quot;max&quot;</code></td><td>Determines whether to minimize or maximize the objective function.</td></tr></tbody></table><p><code>coeff</code> is a list of coefficients for the objective function, a <code>table</code> variable. Suppose you want to minimize the function $$4x_1+12x_2+18x_3$$ the approach to adding the objective function is as follows:</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- Assuming you have already created the model object and stored it in the variable mip</span></span>
<span class="line"><span class="token comment">-- Set the objective function to 4*x1 + 12*x2 + 18*x3, minimize</span></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;min&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="adding-constraints" tabindex="-1"><a class="header-anchor" href="#adding-constraints"><span>Adding Constraints</span></a></h2><h3 id="adding-constraint-equations" tabindex="-1"><a class="header-anchor" href="#adding-constraint-equations"><span>Adding Constraint Equations</span></a></h3><p>In MicroCity Web, use <code>mip:addrow()</code> to add the remaining constraint equations. The usage is as follows:</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-89-0" aria-selected="true">≥</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-89-1" aria-selected="false">=</button></div><!--[--><div class="vp-code-tab active" id="codetab-89-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">≥</div><!--[--><div class="language-lua" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span>cons<span class="token punctuation">,</span> <span class="token string">&quot;&gt;=&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-code-tab" id="codetab-89-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">=</div><!--[--><div class="language-lua" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span>cons<span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><h4 id="parameter-description" tabindex="-1"><a class="header-anchor" href="#parameter-description"><span>Parameter Description</span></a></h4><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td><code>mip</code></td><td>The integer programming model object created at the beginning</td></tr><tr><td><code>cons</code></td><td>Coefficients of the constraint equation. Like <code>cons</code> in setting the objective function, it&#39;s a <code>table</code> variable. Determines the coefficients of the variables in the constraint equation.</td></tr><tr><td><code>&quot;&lt;=&quot;</code> or <code>&quot;&gt;=&quot;</code> or <code>&quot;==&quot;</code></td><td>Determines the relationship between the constraint equation and the right-hand side.</td></tr><tr><td><code>b</code></td><td>The right-hand side of the constraint equation.</td></tr></tbody></table><h4 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example</span></a></h4><p>The objective function has been set to $4x_1+12x_2+18x_3$. Suppose you want to add two constraint equations for this function:</p><p>$$ \left{\begin{matrix} x_1+3x_3\ge3 \<br> 2x_2+2x_3\ge5 \end{matrix}\right. $$</p><p>Add the corresponding constraint equations:</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- Add constraint: x1 + 3*x3 ≥ 3</span></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;&gt;=&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Add constraint: 2*x2 + 2*x3 ≥ 5</span></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;&gt;=&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It can be noticed that the number of coefficients is the same as the number of variables in the objective function. Therefore, before programming, it is necessary to determine the total number of variables and arrange the positions of each variable.</p><h3 id="setting-variable-types" tabindex="-1"><a class="header-anchor" href="#setting-variable-types"><span>Setting Variable Types</span></a></h3><p>MicroCity&#39;s mathematical programming supports integer programming. The default variable range is non-negative real numbers (≥0). Below is a detailed method for setting variable types.</p><p>You can set the <code>i</code>-th variable in the model as an <strong>integer variable</strong> or a <strong>0-1 variable</strong>. If you don&#39;t set the variable to these types, it defaults to a <strong>non-negative real number</strong>.</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-172-0" aria-selected="true">Integer Variable</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-172-1" aria-selected="false">0-1 Variable</button></div><!--[--><div class="vp-code-tab active" id="codetab-172-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">Integer Variable</div><!--[--><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- Set the first variable (first column, col 1) as an integer variable</span></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span><span class="token string">&#39;c1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;int&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-172-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">0-1 Variable</div><!--[--><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- Set the second variable (second column, col 2) as a 0-1 variable</span></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span><span class="token string">&#39;c2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;bin&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="model-solution-and-output" tabindex="-1"><a class="header-anchor" href="#model-solution-and-output"><span>Model Solution and Output</span></a></h2><h3 id="model-solution" tabindex="-1"><a class="header-anchor" href="#model-solution"><span>Model Solution</span></a></h3><p>Since the objective function and constraint equations have been added, solving the model is straightforward:</p><div class="language-lua" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">mip<span class="token punctuation">:</span><span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>After executing this statement, the mathematical model stored in the variable <code>mip</code> is solved 🎉</p><h3 id="output" tabindex="-1"><a class="header-anchor" href="#output"><span>Output</span></a></h3><p>After solving, you still need to output; otherwise, you won&#39;t know the results. Below are some commonly used functions for outputting the solution.</p><p>Get the <strong>value of the objective function</strong>:</p><div class="language-lua" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">mip<span class="token punctuation">[</span><span class="token string">&#39;obj&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre></div><p>Get the value of the <code>i</code>-th <strong>variable</strong>:</p><div class="language-lua" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">mip<span class="token punctuation">[</span><span class="token string">&#39;c&#39;</span><span class="token operator">..</span>i<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre></div><p>Here is a simple example from modeling to solving for reference. (It&#39;s just putting the pieces together)</p><p>Example:</p><p>$$ minf=4x_1+12x_2+18x_3\ s.t.\left{\begin{matrix} x_1+3x_3\ge3 \<br> 2x_2+2x_3\ge5 \ x_1,x_2,x_3\in N \end{matrix}\right. $$</p><blockquote><p>N represents the set of natural numbers (non-negative integers)</p></blockquote><p>Script</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token keyword">local</span> mip <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">newmip</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Set objective functio</span></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;min&quot;</span><span class="token punctuation">)</span> </span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Add constraints</span></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;&gt;=&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">-- x1 + 3*x3 ≥ 3</span></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;&gt;=&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">-- 2*x2 + 2*x3 ≥ 5</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Set all variables as integers</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">do</span></span>
<span class="line">    mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span><span class="token string">&#39;c&#39;</span><span class="token operator">..</span>i<span class="token punctuation">,</span> <span class="token string">&#39;int&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Solve the model</span></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Output the value of the objective function</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Objective function value:&quot;</span><span class="token punctuation">,</span> mip<span class="token punctuation">[</span><span class="token string">&#39;obj&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Output the value of each variable</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">do</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token operator">..</span>i<span class="token operator">..</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">,</span>mip<span class="token punctuation">[</span><span class="token string">&#39;c&#39;</span><span class="token operator">..</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Output</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">Objective function value: 42.0</span>
<span class="line">x1= 0.0</span>
<span class="line">x2= 2.0</span>
<span class="line">x3= 1.0</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Online Execution</p><p>Check this <a href="https://microcity.github.io/#s44523" target="_blank" rel="noopener noreferrer">example</a> in MicroCityWeb</p></div><h2 id="some-modeling-techniques" tabindex="-1"><a class="header-anchor" href="#some-modeling-techniques"><span>Some Modeling Techniques</span></a></h2><h3 id="linearization" tabindex="-1"><a class="header-anchor" href="#linearization"><span>Linearization</span></a></h3><p>Sometimes we encounter modeling problems with multiple subscripts, such as decision variables $x_{ij}$, where $i$ and $j$ are indices. In such cases, linearization encoding is necessary.</p><p>Suppose the decision variable itself has a shape of 3 rows and 4 columns, i.e.:</p><table><thead><tr><th>Col 1</th><th>Col 2</th><th>Col 3</th><th>Col 4</th></tr></thead><tbody><tr><td>$x_{11}$</td><td>$x_{12}$</td><td>$x_{13}$</td><td>$x_{14}$</td></tr><tr><td>$x_{21}$</td><td>$x_{22}$</td><td>$x_{23}$</td><td>$x_{24}$</td></tr><tr><td>$x_{31}$</td><td>$x_{32}$</td><td>$x_{33}$</td><td>$x_{34}$</td></tr></tbody></table><p>Suppose the objective function wants to sum these decision variables, i.e. $F=\sum_{i=1}^3\sum_{j=1}^4x_{ij}$. If you want to input this into the objective function, you can linearize it as $x_{11}+x_{12}+...+x_{14}+x_{21}+...+x_{24}+x_{31}+...+x_{34}$.</p><p>Since there are only two dimensions, you can use two <code>for</code> loops to achieve this:</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token keyword">local</span> cons <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">do</span> <span class="token comment">-- First dimension</span></span>
<span class="line">    <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span> <span class="token comment">-- Second dimension</span></span>
<span class="line">        cons<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">-- Fill in the coefficient</span></span>
<span class="line">        <span class="token comment">-- The idea here is similar to carrying in arithmetic</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="example-assignment-model" tabindex="-1"><a class="header-anchor" href="#example-assignment-model"><span>Example: Assignment Model</span></a></h4><p>Now let&#39;s look at the specific usage of multi-dimensional linearization and its convenience using a practical example.</p><p><strong>People A, B, C, and D deliver goods A, B, C, and D, respectively. The required time is shown in the table below. If each person delivers only one type of goods, which person should be assigned to deliver which type of goods to minimize the total time?</strong></p><table><thead><tr><th>Person\Item</th><th>A</th><th>B</th><th>C</th><th>D</th></tr></thead><tbody><tr><td>A</td><td>14</td><td>9</td><td>4</td><td>15</td></tr><tr><td>B</td><td>11</td><td>7</td><td>9</td><td>10</td></tr><tr><td>C</td><td>13</td><td>2</td><td>10</td><td>5</td></tr><tr><td>D</td><td>17</td><td>9</td><td>15</td><td>13</td></tr></tbody></table><p>Assuming goods A, B, C, D correspond to indices 1, 2, 3, 4, respectively, let $x_{ij}=1$ represent person <code>i</code> delivering goods <code>j</code>, and $x_{ij}=0$ represent person <code>i</code> not delivering goods <code>j</code>.</p><p>The mathematical model for the above problem can be represented as</p><p>$$ minZ=\sum_{i=1}^4\sum_{j=1}^4c_{ij}x_{ij}\ s.t.\left{\begin{matrix} \sum_{j=1}^4x_{ij}=1, i=1,2,...,4 \<br> \sum_{i=1}^4x_{ij}=1, j=1,2,...,4 \ x_{ij}=0,1 \end{matrix}\right. $$</p><p>Solution code</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- Efficiency matrix</span></span>
<span class="line"><span class="token keyword">local</span> cost <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">local</span> mip <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">newmip</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Create the objective function</span></span>
<span class="line"><span class="token keyword">local</span> coeff <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">    <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">        <span class="token comment">-- Easily convert the 2D array to a 1D array here</span></span>
<span class="line">        coeff<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> cost<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span>coeff<span class="token punctuation">,</span> <span class="token string">&quot;min&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Add constraints</span></span>
<span class="line"><span class="token keyword">for</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span> <span class="token comment">-- Control the value of the first dimension</span></span>
<span class="line">    <span class="token keyword">local</span> cons <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">        <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">            <span class="token keyword">if</span> i <span class="token operator">==</span> k <span class="token keyword">then</span> <span class="token comment">-- Sum for j, check i</span></span>
<span class="line">                cons<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">            <span class="token keyword">else</span></span>
<span class="line">                cons<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">            <span class="token keyword">end</span></span>
<span class="line">        <span class="token keyword">end</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line">    mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span>cons<span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">for</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span> <span class="token comment">-- Control the value of the second dimension</span></span>
<span class="line">    <span class="token keyword">local</span> cons <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">        <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">            <span class="token keyword">if</span> j <span class="token operator">==</span> k <span class="token keyword">then</span> <span class="token comment">-- Sum for i, check j</span></span>
<span class="line">                cons<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">            <span class="token keyword">else</span></span>
<span class="line">                cons<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">            <span class="token keyword">end</span></span>
<span class="line">        <span class="token keyword">end</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line">    mip<span class="token punctuation">:</span><span class="token function">addrow</span><span class="token punctuation">(</span>cons<span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Solve the model</span></span>
<span class="line">mip<span class="token punctuation">:</span><span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Output the value of the objective function</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Objective function value:&quot;</span><span class="token punctuation">,</span> mip<span class="token punctuation">[</span><span class="token string">&#39;obj&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Output the decision variables</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span> <span class="token comment">-- First dimension</span></span>
<span class="line">    <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span> <span class="token comment">-- Second dimension</span></span>
<span class="line">        <span class="token keyword">local</span> x <span class="token operator">=</span> mip<span class="token punctuation">[</span><span class="token string">&#39;c&#39;</span> <span class="token operator">..</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span></span>
<span class="line">        <span class="token keyword">if</span> x <span class="token operator">~=</span> <span class="token number">0</span> <span class="token keyword">then</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;x[&quot;</span> <span class="token operator">..</span> i <span class="token operator">..</span> <span class="token string">&quot;][&quot;</span> <span class="token operator">..</span> j <span class="token operator">..</span> <span class="token string">&quot;]=&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">end</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Output</p><div class="language-less line-numbers-mode" data-highlighter="prismjs" data-ext="less" data-title="less"><pre><code><span class="line">Objective function <span class="token property">value</span><span class="token punctuation">:</span> 29.0</span>
<span class="line">x[1][3]= 1.0</span>
<span class="line">x[2][1]= 1.0</span>
<span class="line">x[3][4]= 1.0</span>
<span class="line">x[4][2]= 1.0</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Online Execution</p><p>Check this <a href="https://microcity.github.io/#s445tk" target="_blank" rel="noopener noreferrer">example</a> in MicroCityWeb</p></div><table><thead><tr><th>Result</th><th>Person</th><th>Item</th></tr></thead><tbody><tr><td>$x_{13}=1$</td><td>A</td><td>C</td></tr><tr><td>$x_{21}=1$</td><td>B</td><td>A</td></tr><tr><td>$x_{34}=1$</td><td>C</td><td>D</td></tr><tr><td>$x_{42}=1$</td><td>D</td><td>B</td></tr></tbody></table><h3 id="handling-intermediate-variables" tabindex="-1"><a class="header-anchor" href="#handling-intermediate-variables"><span>Handling Intermediate Variables</span></a></h3><p>Sometimes, there are intermediate variables in a model that must have corresponding positions in the matrix to be solved, and these intermediate variables do not participate in the calculation of the objective function value. <strong>The coefficients of the intermediate variables at their corresponding positions can be set to 0.</strong></p><p>Suppose $x_1, x_2, x_3, x_4$ are decision variables, and $y_1, y_2$ are intermediate variables. The objective function is:</p><p>$$ z=\sum_{i=1}^4x_i $$</p><p>The coefficients of the objective function can be set as follows:</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token keyword">local</span> fcons <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">-- The first 4 elements correspond to decision variables,</span></span>
<span class="line"><span class="token comment">-- and the last 2 elements correspond to intermediate variables</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Afterward, you can proceed with the general process 😎</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: huuhghhgyg@outlook.com">huuhghhgyg</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/MicroCityNotes/en/notes/event-scheduling.html" aria-label="Discrete Event Simulation and Program Control"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Discrete Event Simulation and Program Control</span></div></a><a class="route-link auto-link next" href="/MicroCityNotes/en/notes/debug.html" aria-label="Debugging"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Debugging</span></div></a></nav><!--[--><!--[--><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><!--]--></main><!--]--></div><!--[--><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/MicroCityNotes/assets/app-IsHl6ERv.js" defer></script>
  </body>
</html>

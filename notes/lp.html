<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="alternate" hreflang="en-us" href="https://huuhghhgyg.github.io/MicroCityNotes/en/notes/lp.html"><meta property="og:url" content="https://huuhghhgyg.github.io/MicroCityNotes/notes/lp.html"><meta property="og:site_name" content="MicroCity笔记"><meta property="og:title" content="模型求解"><meta property="og:description" content="模型求解 在MicroCity中可以对数学模型进行求解。接下来，本文将介绍在MicroCity中求解数学模型的常见过程，并提供一些技巧帮助你更好地建模。 规划模型中所有函数的详细用法可以参考文档 提示 本页内容基于 MicroCity 桌面版。如果你在寻找 MicroCity Web 版的混合整数规划求解方法，请参考 MicroCity Web 笔记中..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="og:updated_time" content="2024-03-19T03:31:40.000Z"><meta property="article:modified_time" content="2024-03-19T03:31:40.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"模型求解","image":[""],"dateModified":"2024-03-19T03:31:40.000Z","author":[]}</script><meta name="keywords" content="MicroCity,笔记,文档"><link rel="manifest" href="/MicroCityNotes/manifest.webmanifest"><link rel="icon" href="/MicroCityNotes/images/icon_microcity.png"><link rel="manifest" href="/MicroCityNotes/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#25a5f9"><title>模型求解 | MicroCity笔记</title><meta name="description" content="模型求解 在MicroCity中可以对数学模型进行求解。接下来，本文将介绍在MicroCity中求解数学模型的常见过程，并提供一些技巧帮助你更好地建模。 规划模型中所有函数的详细用法可以参考文档 提示 本页内容基于 MicroCity 桌面版。如果你在寻找 MicroCity Web 版的混合整数规划求解方法，请参考 MicroCity Web 笔记中...">
    <link rel="preload" href="/MicroCityNotes/assets/style-DQdE5WY5.css" as="style"><link rel="stylesheet" href="/MicroCityNotes/assets/style-DQdE5WY5.css">
    <link rel="modulepreload" href="/MicroCityNotes/assets/app-TX6nqiCH.js"><link rel="modulepreload" href="/MicroCityNotes/assets/lp.html-DBeCDLgg.js">
    
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/MicroCityNotes/"><img class="vp-site-logo" src="/MicroCityNotes/images/icon_microcitynotes.png" alt="MicroCity笔记"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">MicroCity笔记</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/MicroCityNotes/notes/" aria-label="笔记"><!---->笔记<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="文档"><span class="title">文档</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="文档"><span class="title">文档</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/MicroCityNotes/docs/desktop/" aria-label="Microcity Desktop 文档"><!---->Microcity Desktop 文档<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/MicroCityNotes/docs/web/" aria-label="Microcity Web 文档"><!---->Microcity Web 文档<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>其它</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/huuhghhgyg/Container-Terminal-Simulation/tree/main/docs" aria-label="仿真框架（港口）说明文档" rel="noopener noreferrer" target="_blank"><!---->仿真框架（港口）说明文档<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://www.zhhuu.top/ModelResource" aria-label="模型/库资源" rel="noopener noreferrer" target="_blank"><!---->模型/库资源<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="MicroCity链接"><span class="title">MicroCity链接</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="MicroCity链接"><span class="title">MicroCity链接</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>GitHub</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/microcity/Desktop" aria-label="MicroCity Desktop 仓库" rel="noopener noreferrer" target="_blank"><!---->MicroCity Desktop 仓库<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/microcity/microcity.github.io" aria-label="MicroCity Web 仓库" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web 仓库<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://microcity.github.io/" aria-label="MicroCity Web 在线环境" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web 在线环境<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Gitee</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://gitee.com/microcity/desktop" aria-label="MicroCity Desktop 仓库" rel="noopener noreferrer" target="_blank"><!---->MicroCity Desktop 仓库<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://gitee.com/microcity/microcity" aria-label="MicroCity Web 仓库" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web 仓库<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>zhhuu.top (自建修改)</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/huuhghhgyg/microcityweb" aria-label="MicroCity Web (fork) 仓库" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web (fork) 仓库<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://mcw.zhhuu.top/" aria-label="MicroCity Web (fork) 在线环境" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web (fork) 在线环境<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/MicroCityNotes/notes/lp.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/MicroCityNotes/en/notes/lp.html" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="slimsearch-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">搜索</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/MicroCityNotes/notes/" aria-label="笔记"><!---->笔记<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="文档"><span class="title">文档</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="文档"><span class="title">文档</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/MicroCityNotes/docs/desktop/" aria-label="Microcity Desktop 文档"><!---->Microcity Desktop 文档<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/MicroCityNotes/docs/web/" aria-label="Microcity Web 文档"><!---->Microcity Web 文档<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>其它</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/huuhghhgyg/Container-Terminal-Simulation/tree/main/docs" aria-label="仿真框架（港口）说明文档" rel="noopener noreferrer" target="_blank"><!---->仿真框架（港口）说明文档<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://www.zhhuu.top/ModelResource" aria-label="模型/库资源" rel="noopener noreferrer" target="_blank"><!---->模型/库资源<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="MicroCity链接"><span class="title">MicroCity链接</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="MicroCity链接"><span class="title">MicroCity链接</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>GitHub</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/microcity/Desktop" aria-label="MicroCity Desktop 仓库" rel="noopener noreferrer" target="_blank"><!---->MicroCity Desktop 仓库<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/microcity/microcity.github.io" aria-label="MicroCity Web 仓库" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web 仓库<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://microcity.github.io/" aria-label="MicroCity Web 在线环境" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web 在线环境<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Gitee</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://gitee.com/microcity/desktop" aria-label="MicroCity Desktop 仓库" rel="noopener noreferrer" target="_blank"><!---->MicroCity Desktop 仓库<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://gitee.com/microcity/microcity" aria-label="MicroCity Web 仓库" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web 仓库<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>zhhuu.top (自建修改)</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/huuhghhgyg/microcityweb" aria-label="MicroCity Web (fork) 仓库" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web (fork) 仓库<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://mcw.zhhuu.top/" aria-label="MicroCity Web (fork) 在线环境" rel="noopener noreferrer" target="_blank"><!---->MicroCity Web (fork) 在线环境<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/MicroCityNotes/notes/lp.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/MicroCityNotes/en/notes/lp.html" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading" href="/MicroCityNotes/notes/" aria-label="目录"><!---->目录<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">通用知识 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/lua.html" aria-label="Lua语言快速上手"><!---->Lua语言快速上手<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/versions.html" aria-label="MicroCity的版本"><!---->MicroCity的版本<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/timelapse.html" aria-label="仿真时间推进"><!---->仿真时间推进<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/oop.html" aria-label="面向对象编程"><!---->面向对象编程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/tools.html" aria-label="有关工具"><!---->有关工具<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">MicroCity <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/visualization.html" aria-label="结果可视化"><!---->结果可视化<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/network.html" aria-label="操作网络"><!---->操作网络<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/MicroCityNotes/notes/lp.html" aria-label="模型求解"><!---->模型求解<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">MicroCityWeb <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/web-ui.html" aria-label="用户界面简介"><!---->用户界面简介<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/3d-scene.html" aria-label="3D 场景"><!---->3D 场景<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/3d-objects.html" aria-label="3D 对象"><!---->3D 对象<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/event-scheduling.html" aria-label="离散事件仿真和程序控制"><!---->离散事件仿真和程序控制<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/mip.html" aria-label="混合整数规划"><!---->混合整数规划<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/debug.html" aria-label="调试相关"><!---->调试相关<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">思路 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/warehouse-simulation.html" aria-label="自动化仓库仿真思路"><!---->自动化仓库仿真思路<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/plots.html" aria-label="通用绘图代码"><!---->通用绘图代码<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/cy-simulation.html" aria-label="港口AGV服务流程三维仿真思路"><!---->港口AGV服务流程三维仿真思路<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Gallery <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/gallery/build-a-clock.html" aria-label="绘制一个时钟"><!---->绘制一个时钟<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/gallery/build-an-elevator.html" aria-label="构建电梯仿真模型"><!---->构建电梯仿真模型<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/MicroCityNotes/notes/gallery/exp-extended-bisect-search.html" aria-label="指数拓展的二分搜索"><!---->指数拓展的二分搜索<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="模型求解" tabindex="-1"><a class="header-anchor" href="#模型求解"><span>模型求解</span></a></h1><p>在MicroCity中可以对数学模型进行求解。接下来，本文将介绍在MicroCity中求解数学模型的常见过程，并提供一些技巧帮助你更好地建模。</p><p>规划模型中所有函数的详细用法可以参考文档 <a class="route-link" href="/MicroCityNotes/docs/desktop/4.8_mixed_integer_programming.html">4.8混合整数线性规划</a></p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>本页内容基于 MicroCity 桌面版。如果你在寻找 MicroCity Web 版的混合整数规划求解方法，请参考 MicroCity Web 笔记中对应的 <a class="route-link" href="/MicroCityNotes/notes/mip.html">混合整数规划</a> 部分。</p></div><h2 id="创建模型对象" tabindex="-1"><a class="header-anchor" href="#创建模型对象"><span>创建模型对象</span></a></h2><p>创建规划模型对象，存入变量<code>lp</code>中。</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token keyword">local</span> lp <span class="token operator">=</span> <span class="token function">CreateLP</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>官方文档中将创建的数学模型对象存入变量<code>LPModel</code>中，作用同本文的<code>lp</code></p></blockquote><h2 id="写入数学模型" tabindex="-1"><a class="header-anchor" href="#写入数学模型"><span>写入数学模型</span></a></h2><p>此时，数学模型的对象已经创建并存入了变量<code>lp</code>中，可以对其进行更进一步的操作。数学模型一般分为两个部分：</p><ul><li><a href="#%E5%88%9B%E5%BB%BA%E7%9B%AE%E6%A0%87%E5%87%BD%E6%95%B0">目标函数</a></li><li><a href="#%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F%E6%96%B9%E7%A8%8B">约束方程</a></li></ul><p>接下来，先介绍创建目标函数的具体做法。</p><h3 id="创建目标函数" tabindex="-1"><a class="header-anchor" href="#创建目标函数"><span>创建目标函数</span></a></h3><p>MicroCity中，使用<code>SetObjectFunction()</code>设置模型对象的目标函数。允许选择目标函数求<strong>最大值</strong>或<strong>最小值</strong>。具体用法如下：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-53-0" aria-selected="true">最大值</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-53-1" aria-selected="false">最小值</button></div><!--[--><div class="vp-code-tab active" id="codetab-53-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">最大值</div><!--[--><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token function">SetObjFunction</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> coeff<span class="token punctuation">,</span> <span class="token string">&quot;max&quot;</span><span class="token punctuation">)</span> <span class="token comment">--求最大值</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-53-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">最小值</div><!--[--><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token function">SetObjFunction</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> coeff<span class="token punctuation">,</span> <span class="token string">&quot;min&quot;</span><span class="token punctuation">)</span> <span class="token comment">--求最小值</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!--]--></div><!--]--></div><blockquote><p>&quot;min&quot;和&quot;max&quot;不区分大小写，写&quot;MIN&quot;和&quot;MAX&quot;也可以</p></blockquote><h4 id="参数说明及示例" tabindex="-1"><a class="header-anchor" href="#参数说明及示例"><span>参数说明及示例</span></a></h4><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td><code>lp</code></td><td>数学模型对象。将数学模型输入函数中，为模型设置目标函数</td></tr><tr><td><code>coeff</code></td><td>目标函数系数，是一个<code>table</code>类型的变量。用于确定模型中目标函数的系数。</td></tr><tr><td><code>&quot;min&quot;</code>或<code>&quot;max&quot;</code></td><td>确定目标函数求最大还是求最小。</td></tr></tbody></table><p><code>coeff</code>是目标函数的系数列表，是一个<code>table</code>类型的变量。假设你要求函数$4x_1+12x_2+18x_3$的<strong>最小值</strong>，则添加目标函数的做法如下：</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- 假设你已经创建了模型对象，并存入变量lp中</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 4*x1 + 12*x2 + 18*x3</span></span>
<span class="line"><span class="token keyword">local</span> coeff <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 设置目标函数：求最小</span></span>
<span class="line"><span class="token function">SetObjFunction</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> coeff<span class="token punctuation">,</span> <span class="token string">&quot;min&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="添加约束方程" tabindex="-1"><a class="header-anchor" href="#添加约束方程"><span>添加约束方程</span></a></h3><p>在MicroCity中，添加模型约束的函数为<code>AddConstraint()</code>，用法如下：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-117-0" aria-selected="true">≤</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-117-1" aria-selected="false">≥</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-117-2" aria-selected="false">=</button></div><!--[--><div class="vp-code-tab active" id="codetab-117-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">≤</div><!--[--><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- 使用符号表达</span></span>
<span class="line"><span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;&lt;=&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 或者可以使用缩写表达</span></span>
<span class="line"><span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;le&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-117-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">≥</div><!--[--><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- 使用符号表达</span></span>
<span class="line"><span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;&gt;=&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 或者可以使用缩写表达</span></span>
<span class="line"><span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;ge&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-117-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">=</div><!--[--><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- 使用符号表达</span></span>
<span class="line"><span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 或者可以使用缩写表达</span></span>
<span class="line"><span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;eq&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h4 id="参数说明" tabindex="-1"><a class="header-anchor" href="#参数说明"><span>参数说明</span></a></h4><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td><code>lp</code></td><td>数学模型对象。将数学模型输入函数中，为模型添加约束</td></tr><tr><td><code>cons</code></td><td>约束方程系数。和设置目标函数中的<code>cons</code>一样，也是一个<code>table</code>类型的变量。用于确定约束方程中各个变量的系数。</td></tr><tr><td><code>&quot;&lt;=&quot;</code> 或 <code>&quot;&gt;=&quot;</code> 或 <code>&quot;==&quot;</code>，或其对应的字母表达</td><td>确定约束方程与右端项的关系</td></tr><tr><td><code>b</code></td><td>一个数字，表示约束方程的右端项。可以是变量也可以是常量</td></tr></tbody></table><h4 id="示例" tabindex="-1"><a class="header-anchor" href="#示例"><span>示例</span></a></h4><p>上面已经设置了目标函数为$4x_1+12x_2+18x_3$，假设你要为这个函数添加两个约束方程： $$ \left{\begin{matrix} x_1+3x_3\ge3 \<br> 2x_2+2x_3\ge5 \end{matrix}\right. $$ 添加对应约束方程：</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- 添加约束：x1+3*x3≥3</span></span>
<span class="line">cons <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;&gt;=&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 添加约束：2*x2+2*x3≥5</span></span>
<span class="line">cons <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;&gt;=&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不难注意到，系数的个数和目标函数中变量的个数一致。因此，在编程求解之前首先要搞清楚变量的总数，并安排好各个变量的位置。</p><h3 id="设置变量类型" tabindex="-1"><a class="header-anchor" href="#设置变量类型"><span>设置变量类型</span></a></h3><p>MicroCity中的数学规划支持整数规划。如果没有对变量设置<code>SetUnbounded()</code>，默认变量的取值范围是非负实数(≥0)。下面介绍变量类型设置的详细做法。</p><p>你可以将模型中第<code>i</code>个变量设置为<strong>整数变量</strong>或<strong>0-1变量</strong>。如果不将变量设置为这些类型，则默认变量为<strong>非负实数</strong>。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-196-0" aria-selected="true">整数变量</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-196-1" aria-selected="false">0-1变量</button></div><!--[--><div class="vp-code-tab active" id="codetab-196-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">整数变量</div><!--[--><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token function">SetInteger</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token comment">--整数变量</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-196-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">0-1变量</div><!--[--><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token function">SetBinary</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token comment">--0-1变量</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>让第i个变量的值可以是负数（默认取不到负数）：</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token function">SetUnbounded</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="模型求解和输出" tabindex="-1"><a class="header-anchor" href="#模型求解和输出"><span>模型求解和输出</span></a></h2><h3 id="模型求解-1" tabindex="-1"><a class="header-anchor" href="#模型求解-1"><span>模型求解</span></a></h3><p>由于目标函数和约束方程都已经添加完毕，因此模型的求解就很简单了，只需要一步：</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token function">SolveLP</span><span class="token punctuation">(</span>lp<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>执行完这条语句后，存放于变量<code>lp</code>内的数学模型就求解完毕了🎉</p><h3 id="输出" tabindex="-1"><a class="header-anchor" href="#输出"><span>输出</span></a></h3><p>求解完还需要输出，否则就不知道求解的结果如何。以下是常用的输出求解结果的函数。</p><p>获取<strong>目标函数值</strong>：</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token function">GetObjective</span><span class="token punctuation">(</span>lp<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>获取第<code>i</code>个<strong>变量的值</strong>：</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token function">GetVariable</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="solvelp" tabindex="-1"><a class="header-anchor" href="#solvelp"><span>SolveLP</span></a></h4><p><code>SolveLP()</code>函数在求解完毕后也有输出，输出代码的含义如下：</p><table><thead><tr><th>输出代码</th><th>含义</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>-1</td><td>无效的LP模型</td></tr><tr><td>-2</td><td>无内存</td></tr><tr><td>1</td><td>次优</td></tr><tr><td>2</td><td>无可行解</td></tr><tr><td>3</td><td>无界解</td></tr><tr><td>4</td><td>退化</td></tr><tr><td>5</td><td>遇到数值错误</td></tr><tr><td>6</td><td>用户终止了求解</td></tr><tr><td>7</td><td>超时错误</td></tr></tbody></table><p>其他返回值表示的含义请参阅文档 <a class="route-link" href="/MicroCityNotes/docs/desktop/4.8_mixed_integer_programming.html">4.8混合整数线性规划</a> 中的<code>SolveLP()</code>函数。</p><h2 id="模型求解示例" tabindex="-1"><a class="header-anchor" href="#模型求解示例"><span>模型求解示例</span></a></h2><p>这里提供一个简单的从建模至求解的示例供参考。（其实就是将前面的拼起来）</p><p>算例： $$ minf=4x_1+12x_2+18x_3\ s.t.\left{\begin{matrix} x_1+3x_3\ge3 \<br> 2x_2+2x_3\ge5 \ x_1,x_2,x_3\in N \end{matrix}\right. $$</p><blockquote><p>N表示自然数（非负整数集合）</p></blockquote><p>脚本</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- 创建线性规划对象</span></span>
<span class="line"><span class="token keyword">local</span> lp <span class="token operator">=</span> <span class="token function">CreateLP</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">local</span> n <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">--设置目标函数个数</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 目标函数：4*x1 + 12*x2 + 18*x3</span></span>
<span class="line"><span class="token comment">-- 设置目标函数系数，目标函数求最小</span></span>
<span class="line"><span class="token keyword">local</span> coeff <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">18</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token function">SetObjFunction</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> coeff<span class="token punctuation">,</span> <span class="token string">&quot;min&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 添加约束1：x1 + 3*x3 ≥ 3</span></span>
<span class="line">cons <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;&gt;=&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 添加约束2：2*x2 + 2*x3 ≥ 5</span></span>
<span class="line">cons <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;&gt;=&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 由于没有设置SetUnbounded()，</span></span>
<span class="line"><span class="token comment">-- 默认所有变量取值非负，</span></span>
<span class="line"><span class="token comment">-- 因此不用针对变量非负添加约束。</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 设置所有变量为整数</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token keyword">do</span></span>
<span class="line">    <span class="token function">SetInteger</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 求解模型</span></span>
<span class="line"><span class="token function">SolveLP</span><span class="token punctuation">(</span>lp<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 输出目标函数值</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;目标函数值：&quot;</span><span class="token punctuation">,</span><span class="token function">GetObjective</span><span class="token punctuation">(</span>lp<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 输出各个变量的值</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token keyword">do</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">,</span><span class="token function">GetVariable</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出结果</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">目标函数值：42</span>
<span class="line">x1=0</span>
<span class="line">x2=2</span>
<span class="line">x3=1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="建模的一些技巧" tabindex="-1"><a class="header-anchor" href="#建模的一些技巧"><span>建模的一些技巧</span></a></h2><h3 id="线性化" tabindex="-1"><a class="header-anchor" href="#线性化"><span>线性化</span></a></h3><p>有时候我们会遇到多下标的建模问题，如决策变量为$x_{ij}$，这个时候就要将其进行线性化编码。</p><p>假设决策变量本身的形状共有3行4列，即：</p><table><thead><tr><th>列1</th><th>列2</th><th>列3</th><th>列4</th></tr></thead><tbody><tr><td>$x_{11}$</td><td>$x_{12}$</td><td>$x_{13}$</td><td>$x_{14}$</td></tr><tr><td>$x_{21}$</td><td>$x_{22}$</td><td>$x_{23}$</td><td>$x_{24}$</td></tr><tr><td>$x_{31}$</td><td>$x_{32}$</td><td>$x_{33}$</td><td>$x_{34}$</td></tr></tbody></table><p>假设目标函数要将这些决策变量求和，即 $F=\sum_{i=1}^3\sum_{j=1}^4x_{ij}$ 如果要将其输入目标函数，此时可以将其线性化为 $x_{11}+x_{12}+...+x_{14}+x_{21}+...+x_{24}+x_{31}+...+x_{34}$</p><p>由于只有两个维度，因此可以使用两个<code>for</code>实现：</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token keyword">local</span> cons <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">do</span> <span class="token comment">-- 第一维</span></span>
<span class="line">    <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span> <span class="token comment">-- 第二维</span></span>
<span class="line">        cons<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">-- 填入系数</span></span>
<span class="line">        <span class="token comment">-- 其中 4 * (i - 1) + j 的思想类似于进位</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">--结果：</span></span>
<span class="line"><span class="token comment">-- cons长度为12，值都为1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="例题-指派模型" tabindex="-1"><a class="header-anchor" href="#例题-指派模型"><span>例题：指派模型</span></a></h4><p>下面以一个实际的例题来看看多维线性化的具体使用方法及其方便之处。</p><p><strong>甲、乙、丙、丁四人配送A，B，C，D四种货物，所需时间如表所示。若一种货物只交一人送货，则应指派何人配送何种货物，能使总的时间最少？</strong></p><table><thead><tr><th>人\工件</th><th>A</th><th>B</th><th>C</th><th>D</th></tr></thead><tbody><tr><td>甲</td><td>14</td><td>9</td><td>4</td><td>15</td></tr><tr><td>乙</td><td>11</td><td>7</td><td>9</td><td>10</td></tr><tr><td>丙</td><td>13</td><td>2</td><td>10</td><td>5</td></tr><tr><td>丁</td><td>17</td><td>9</td><td>15</td><td>13</td></tr></tbody></table><p>假设货物A、B、C、D对应的编号依次为1、2、3、4，设 $x_{ij}=1$ 时表示第<code>i</code>个人送<code>j</code>货，$x_{ij}=0$ 时表示第<code>i</code>个人不送<code>j</code>货。</p><p>则上述问题的数学模型可以表示为</p><p>$$ minZ=\sum_{i=1}^4\sum_{j=1}^4c_{ij}x_{ij}\ s.t.\left{\begin{matrix} \sum_{j=1}^4x_{ij}=1, i=1,2,...,4 \<br> \sum_{i=1}^4x_{ij}=1, j=1,2,...,4 \ x_{ij}=0,1 \end{matrix}\right. $$</p><p>求解代码</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token comment">-- 效率矩阵</span></span>
<span class="line"><span class="token keyword">local</span> cost <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">15</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">13</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">local</span> lp <span class="token operator">=</span> <span class="token function">CreateLP</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 创建目标函数</span></span>
<span class="line"><span class="token keyword">local</span> coeff <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">    <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">        <span class="token comment">-- 此处可以轻松将二维数组转换为一维数组</span></span>
<span class="line">        coeff<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> cost<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span>
<span class="line"><span class="token function">SetObjFunction</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> coeff<span class="token punctuation">,</span> <span class="token string">&quot;min&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">--添加约束</span></span>
<span class="line"><span class="token keyword">for</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span> <span class="token comment">-- 第i维的值控制</span></span>
<span class="line">    <span class="token keyword">local</span> cons <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">        <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">            <span class="token keyword">if</span> i <span class="token operator">==</span> k <span class="token keyword">then</span> <span class="token comment">-- j求和，判断i</span></span>
<span class="line">                cons<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">            <span class="token keyword">else</span></span>
<span class="line">                cons<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">            <span class="token keyword">end</span></span>
<span class="line">        <span class="token keyword">end</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line">    <span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">for</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span> <span class="token comment">-- 第j维的值控制</span></span>
<span class="line">    <span class="token keyword">local</span> cons <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">        <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span></span>
<span class="line">            <span class="token keyword">if</span> j <span class="token operator">==</span> k <span class="token keyword">then</span> <span class="token comment">--i求和，判断j</span></span>
<span class="line">                cons<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">            <span class="token keyword">else</span></span>
<span class="line">                cons<span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">            <span class="token keyword">end</span></span>
<span class="line">        <span class="token keyword">end</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line">    <span class="token function">AddConstraint</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> cons<span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 求解模型</span></span>
<span class="line"><span class="token function">SolveLP</span><span class="token punctuation">(</span>lp<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 输出目标函数值</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;目标函数值：&quot;</span><span class="token punctuation">,</span><span class="token function">GetObjective</span><span class="token punctuation">(</span>lp<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 输出决策变量</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span> <span class="token comment">-- 第一维</span></span>
<span class="line">    <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span> <span class="token comment">-- 第二维</span></span>
<span class="line">        <span class="token keyword">local</span> x <span class="token operator">=</span> <span class="token function">GetVariable</span><span class="token punctuation">(</span>lp<span class="token punctuation">,</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> x<span class="token operator">~=</span><span class="token number">0</span> <span class="token keyword">then</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;x[&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token string">&quot;][&quot;</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token string">&quot;]=&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">end</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">目标函数值：29</span>
<span class="line">x[1][3]=1</span>
<span class="line">x[2][1]=1</span>
<span class="line">x[3][4]=1</span>
<span class="line">x[4][2]=1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>结果</th><th style="text-align:center;">人</th><th style="text-align:center;">配送工件</th></tr></thead><tbody><tr><td>$x_{13}=1$</td><td style="text-align:center;">甲</td><td style="text-align:center;">C</td></tr><tr><td>$x_{21}=1$</td><td style="text-align:center;">乙</td><td style="text-align:center;">A</td></tr><tr><td>$x_{34}=1$</td><td style="text-align:center;">丙</td><td style="text-align:center;">D</td></tr><tr><td>$x_{42}=1$</td><td style="text-align:center;">丁</td><td style="text-align:center;">B</td></tr></tbody></table><h3 id="中间变量的处理" tabindex="-1"><a class="header-anchor" href="#中间变量的处理"><span>中间变量的处理</span></a></h3><p>有时候模型中会存在一些中间变量，这些变量必须要在矩阵中有对应的位置才能对其进行求解，而这些中间变量不参与目标函数值的运算。<strong>可以将中间变量对应位置的系数设为0。</strong></p><p>假设$x_1,x_2,x_3,x_4$为决策变量，$y_1,y_2$为中间变量。目标函数为: $$ z=\sum_{i=1}^4x_i $$ 则目标函数系数可以设为：</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line"><span class="token keyword">local</span> fcons <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>接下来按照一般流程做就可以啦😎</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: huuhghhgyg@outlook.com">huuhghhgyg</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/MicroCityNotes/notes/network.html" aria-label="操作网络"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>操作网络</span></div></a><!----></nav><!--[--><!--[--><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><!--]--></main><!--]--></div><!--[--><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/MicroCityNotes/assets/app-TX6nqiCH.js" defer></script>
  </body>
</html>

import{_ as e,e as o,h as s,i as p,g as a,j as l,k as c,r as i,o as r}from"./app-DUe19ldY.js";const u={};function k(d,n){const t=i("RouteLink");return r(),o("div",null,[n[11]||(n[11]=s("h1",{id:"_2-2-搜索国家",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_2-2-搜索国家"},[s("span",null,"2.2 搜索国家")])],-1)),n[12]||(n[12]=s("p",null,"这个教程旨在指导您如何使用 MicroCity Web 脚本接口。",-1)),n[13]||(n[13]=s("h2",{id:"场景对象的数据结构",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#场景对象的数据结构"},[s("span",null,"场景对象的数据结构")])],-1)),s("p",null,[n[1]||(n[1]=a("在场景中，您可以加载内置对象，如'box'，'sphere' 等，也可以导入外部 json 文件，如 geojson 和 gltf。所有加载到场景中的对象可以分为三种基本类型，称为")),n[2]||(n[2]=s("strong",null,"points",-1)),n[3]||(n[3]=a("、")),n[4]||(n[4]=s("strong",null,"polyline",-1)),n[5]||(n[5]=a(" 和")),n[6]||(n[6]=s("strong",null,"mesh",-1)),n[7]||(n[7]=a("（多边形是")),n[8]||(n[8]=s("strong",null,"mesh",-1)),n[9]||(n[9]=a("的一种特殊类型）。对象数据被组织成如下所示的分层树结构。您可以在 ")),l(t,{to:"/docs/web/4.3_scene_and_object.html"},{default:c(()=>n[0]||(n[0]=[a("4.3 场景与对象")])),_:1}),n[10]||(n[10]=a(" 中找到有关对象的更多信息。"))]),n[14]||(n[14]=p(`<img src="https://mcw.zhhuu.top/doc/img/data_structure.svg" width="640"><h2 id="发起查询" tabindex="-1"><a class="header-anchor" href="#发起查询"><span>发起查询</span></a></h2><p>您可以通过点击<strong>新建</strong><img src="https://mcw.zhhuu.top/img/new.svg" alt="new">打开一个示例脚本 -&gt; <strong>世界地图</strong>。然后点击<strong>运行</strong><img src="https://mcw.zhhuu.top/img/play.svg" alt="run">，这样世界上所有国家的地图和相关信息就会显示出来。现在假设我们想要找出人口超过1亿且完全位于北半球的国家。因此，我们需要检查每个国家的人口数量和边界坐标。以下是完整代码。</p><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua"><pre><code><span class="line">scene<span class="token punctuation">.</span><span class="token function">setenv</span><span class="token punctuation">(</span><span class="token punctuation">{</span>camtype<span class="token operator">=</span><span class="token string">&#39;ortho&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>                              <span class="token comment">--将场景相机设置为正交投影</span></span>
<span class="line"><span class="token keyword">local</span> obj <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">addobj</span><span class="token punctuation">(</span><span class="token string">&#39;/res/world_countries.geojson&#39;</span><span class="token punctuation">)</span>     <span class="token comment">--获取世界各国地理数据</span></span>
<span class="line"><span class="token keyword">for</span> i<span class="token punctuation">,</span>country <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span><span class="token function">getchildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">do</span>                <span class="token comment">--遍历每个国家</span></span>
<span class="line">     <span class="token keyword">local</span> north <span class="token operator">=</span> <span class="token keyword">true</span>                                      <span class="token comment">--假设国家位于北半球</span></span>
<span class="line">     <span class="token keyword">for</span> j<span class="token punctuation">,</span> land <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>country<span class="token punctuation">:</span><span class="token function">getchildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">do</span>         <span class="token comment">--遍历该国家所有领土</span></span>
<span class="line">         <span class="token keyword">local</span> points <span class="token operator">=</span> land<span class="token punctuation">:</span><span class="token function">getvertices</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                   <span class="token comment">--获取所有顶点坐标</span></span>
<span class="line">         <span class="token keyword">for</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">#</span>points<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">do</span>                            <span class="token comment">--遍历顶点坐标中的纬度坐标</span></span>
<span class="line">             <span class="token keyword">if</span> points<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">then</span>                           <span class="token comment">--如果纬度小于0 (y&lt;0)</span></span>
<span class="line">                 north <span class="token operator">=</span> <span class="token keyword">false</span>                               <span class="token comment">--该领土不完全位于北半球</span></span>
<span class="line">             <span class="token keyword">end</span></span>
<span class="line">         <span class="token keyword">end</span></span>
<span class="line">     <span class="token keyword">end</span></span>
<span class="line">     <span class="token keyword">local</span> data <span class="token operator">=</span> country<span class="token punctuation">:</span><span class="token function">getdata</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                          <span class="token comment">--获取国家属性数据</span></span>
<span class="line">     <span class="token keyword">if</span> north <span class="token keyword">and</span> <span class="token function">tonumber</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&#39;POP_EST&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">100000000</span> <span class="token keyword">then</span> <span class="token comment">--判断是否满足两个条件</span></span>
<span class="line">         <span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&#39;NAME&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;, 人口:&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">&#39;POP_EST&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token comment">--打印国家名称和人口</span></span>
<span class="line">         <span class="token keyword">for</span> j<span class="token punctuation">,</span> land <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>country<span class="token punctuation">:</span><span class="token function">getchildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">do</span>     <span class="token comment">--遍历该国家所有领土</span></span>
<span class="line">             land<span class="token punctuation">:</span><span class="token function">setmat</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token operator">=</span><span class="token string">&#39;yellow&#39;</span><span class="token punctuation">,</span> opacity<span class="token operator">=</span><span class="token number">0.6</span><span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token comment">--标记为黄色且稍作透明处理</span></span>
<span class="line">         <span class="token keyword">end</span></span>
<span class="line">     <span class="token keyword">end</span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line">scene<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                               <span class="token comment">--渲染场景</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="展示结果" tabindex="-1"><a class="header-anchor" href="#展示结果"><span>展示结果</span></a></h2><p><strong>运行</strong><img src="https://mcw.zhhuu.top/img/play.svg" alt="run">脚本将会突出显示搜索到的国家，并在下方的<strong>消息栏</strong>中打印信息。您可以点击消息栏以放大它。</p><p><img src="https://mcw.zhhuu.top/doc/img/searching_for_countries.png" alt="results"></p><blockquote><p>本文使用ChatGPT翻译，如有遗漏请<a href="https://github.com/huuhghhgyg/MicroCityNotes/issues/new" target="_blank" rel="noopener noreferrer"><strong>反馈</strong></a>。</p></blockquote>`,8))])}const g=e(u,[["render",k],["__file","2.2_searching_for_countries.html.vue"]]),m=JSON.parse(`{"path":"/docs/web/2.2_searching_for_countries.html","title":"2.2 搜索国家","lang":"zh-CN","frontmatter":{"next":"3.1_ui_overview.md","description":"2.2 搜索国家 这个教程旨在指导您如何使用 MicroCity Web 脚本接口。 场景对象的数据结构 在场景中，您可以加载内置对象，如'box'，'sphere' 等，也可以导入外部 json 文件，如 geojson 和 gltf。所有加载到场景中的对象可以分为三种基本类型，称为points、polyline 和mesh（多边形是mesh的一种特...","head":[["meta",{"property":"og:url","content":"https://huuhghhgyg.github.io/MicroCityNotes/docs/web/2.2_searching_for_countries.html"}],["meta",{"property":"og:site_name","content":"MicroCity笔记"}],["meta",{"property":"og:title","content":"2.2 搜索国家"}],["meta",{"property":"og:description","content":"2.2 搜索国家 这个教程旨在指导您如何使用 MicroCity Web 脚本接口。 场景对象的数据结构 在场景中，您可以加载内置对象，如'box'，'sphere' 等，也可以导入外部 json 文件，如 geojson 和 gltf。所有加载到场景中的对象可以分为三种基本类型，称为points、polyline 和mesh（多边形是mesh的一种特..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://mcw.zhhuu.top/img/new.svg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-09T05:29:11.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-09T05:29:11.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"2.2 搜索国家\\",\\"image\\":[\\"https://mcw.zhhuu.top/img/new.svg\\",\\"https://mcw.zhhuu.top/img/play.svg\\",\\"https://mcw.zhhuu.top/img/play.svg\\",\\"https://mcw.zhhuu.top/doc/img/searching_for_countries.png\\"],\\"dateModified\\":\\"2024-06-09T05:29:11.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"场景对象的数据结构","slug":"场景对象的数据结构","link":"#场景对象的数据结构","children":[]},{"level":2,"title":"发起查询","slug":"发起查询","link":"#发起查询","children":[]},{"level":2,"title":"展示结果","slug":"展示结果","link":"#展示结果","children":[]}],"git":{"updatedTime":1717910951000,"contributors":[{"name":"huuhghhgyg","username":"huuhghhgyg","email":"huuhghhgyg@outlook.com","commits":4,"url":"https://github.com/huuhghhgyg"}],"changelog":[{"hash":"d2bac9f38f9777a55784f5ac659d434a7d2f2636","date":1717910951000,"email":"huuhghhgyg@outlook.com","author":"huuhghhgyg","message":"[chore] 修改图片链接源"},{"hash":"46d1a58fcec4f765b9b342811dd51fdb277de815","date":1715911770000,"email":"huuhghhgyg@outlook.com","author":"huuhghhgyg","message":"[fix] hotfix 修复gitee图片链接不可用"},{"hash":"d6e89008eaf115ddc95c7d15872f3a20e96b9a8e","date":1710907892000,"email":"huuhghhgyg@outlook.com","author":"huuhghhgyg","message":"[fix] 删除内置导航"},{"hash":"5d4891efe5ac969838d0075a68fbb6f903b2d890","date":1710819100000,"email":"huuhghhgyg@outlook.com","author":"huuhghhgyg","message":"[feat] 添加MicroCity Web的文档翻译"}]},"filePathRelative":"docs/web/2.2_searching_for_countries.md","autoDesc":true,"excerpt":"\\n<p>这个教程旨在指导您如何使用 MicroCity Web 脚本接口。</p>\\n<h2>场景对象的数据结构</h2>\\n<p>在场景中，您可以加载内置对象，如'box'，'sphere' 等，也可以导入外部 json 文件，如 geojson 和 gltf。所有加载到场景中的对象可以分为三种基本类型，称为<strong>points</strong>、<strong>polyline</strong> 和<strong>mesh</strong>（多边形是<strong>mesh</strong>的一种特殊类型）。对象数据被组织成如下所示的分层树结构。您可以在 <a href=\\"/MicroCityNotes/docs/web/4.3_scene_and_object.html\\" target=\\"_blank\\">4.3 场景与对象</a> 中找到有关对象的更多信息。</p>"}`);export{g as comp,m as data};
